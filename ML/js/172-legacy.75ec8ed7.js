"use strict";(self["webpackChunkbos_designer"]=self["webpackChunkbos_designer"]||[]).push([[172],{7172:function(e,t,s){s.r(t),s.d(t,{default:function(){return Y}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]"},[s("C-Back-Nav",{attrs:{title:"客戶資料查詢",routeTarget:{name:"Customer"}}}),s("section",{staticClass:"relative z-0 mt-[52px] p-3"},[s("ul",{staticClass:"scrollnone nav nav-tabs mb-4 flex list-none overflow-x-auto border-b border-solid border-primary pl-0"},[s("li",{class:["UserInfo"===e.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(t){e.seletedTab="UserInfo"},keypress:function(t){e.seletedTab="UserInfo"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[e._v("個人資料")])]),s("li",{class:["Consumption"===e.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(t){e.seletedTab="Consumption"},keypress:function(t){e.seletedTab="Consumption"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[e._v("服務紀錄")])]),s("li",{class:["Income"===e.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(t){e.seletedTab="Income"},keypress:function(t){e.seletedTab="Income"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[e._v("入金紀錄")])]),s("li",{class:["Coupon"===e.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(t){e.seletedTab="Coupon"},keypress:function(t){e.seletedTab="Coupon"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[e._v("卡券紀錄")])])]),s("keep-alive",[s(e.seletedTab,{tag:"component"})],1)],1)],1)},a=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[e.resultData?s("div",{staticClass:"px-2"},[s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("姓名")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.name||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("電話")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.cellphone||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("市話")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.cellphone||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("客戶暱稱")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.nickName||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("性別")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.gender||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("Email")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.email||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("Line ID")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.lineId||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("生日")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.birthday.year&&"0"!==e.resultData.birthday.year?e.resultData.birthday.year+"/":"")+e._s(e.resultData.birthday.month&&"0"!==e.resultData.birthday.month?e.resultData.birthday.month+"/":"--.")+e._s(e.resultData.birthday.day&&"0"!==e.resultData.birthday.day?e.resultData.birthday.day:"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("地址")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.address||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[e._v("客戶來源")]),s("div",{staticClass:"w-3/4"},[e._v(e._s(e.resultData.source||"--"))])])]):e._e()])},o=[],n=s(6835),l=s(8534),d={name:"customer-component-userInfo",data:function(){return{resultData:null}},mounted:function(){this.getCustomer()},methods:{getCustomer:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a,i;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.customer({id:e.$route.query.id});case 2:if(s=t.sent,r=s.data,a=r.data,i=r.errors,!i){t.next=6;break}return t.abrupt("return");case 6:e.resultData=a.customer;case 7:case"end":return t.stop()}}),t)})))()}}},c=d,u=s(3736),p=(0,u.Z)(c,i,o,!1,null,null,null),m=p.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[e.reviewResult.orders&&0===e.reviewResult.orders.length?s("p",{staticClass:"mt-10 text-sm text-stone-500"},[e._v("此客戶尚無服務紀錄")]):e._e(),e.reviewResult.orders&&e.reviewResult.orders.length>0?s("h2",{staticClass:"mt-5 mb-3 text-xl font-bold"},[e._v("訂單列表")]):e._e(),e.reviewResult.orders&&e.reviewResult.orders.length>0?s("ul",{staticClass:"grid gap-4"},e._l(e.reviewResult.orders,(function(t){return s("li",{key:t.id,staticClass:"w-full bg-[#08424c] p-2 text-white"},[s("p",{staticClass:"mb-2 text-xl font-bold"},[e._v("訂單編號 "+e._s(t.no))]),s("div",{staticClass:"grid grid-cols-12 gap-2"},[s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("服務消費")]),s("p",[e._v("$"+e._s(t.serviceFakeTotal))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("店販消費")]),s("p",[e._v("$"+e._s(t.productFakeTotal))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("卡券使用(入業績)")]),s("p",[e._v("$"+e._s(t.useTicketTotal))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("卡券販賣(入業績)")]),s("p",[e._v("$"+e._s(t.ticketSellIntoPerformance))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("業績收入")]),s("p",[e._v("$"+e._s(t.performanceIncome))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("卡券販賣(不入業績)")]),s("p",[e._v("$"+e._s(t.ticketSellNotIntoPerformance))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("卡券使用(-)")]),s("p",[e._v("$"+e._s(t.usedTicketForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("第三方卡券(-)")]),s("p",[e._v("$"+e._s(t.thirdPartTicketForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("其他付款方式(-)")]),s("p",[e._v("$"+e._s(t.otherPayWayForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[e._v("入金使用(-)")]),s("p",[e._v("$"+e._s(t.walletUsedForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between"},[s("p",[e._v("營業現金應收")]),s("p",[e._v("$"+e._s(t.businessCash))])])]),s("ul",{staticClass:"my-2"},[s("li",{staticClass:"flex items-center justify-between bg-black/20 py-3 px-2",on:{click:function(e){t.isOpen=!t.isOpen},keypress:function(e){t.isOpen=!t.isOpen}}},[s("p",{staticClass:"text-lg"},[e._v("詳細資料")]),s("font-awesome-icon",{staticClass:"cursor-pointer text-lg duration-300",class:{"rotate-180":t.isOpen},attrs:{icon:"fa-regular fa-angle-up"}})],1),s("ul",{staticClass:"overflow-hidden bg-black/20 px-2 duration-300",class:{"max-h-[200vh]":t.isOpen,"max-h-[0px]":!t.isOpen}},[s("li",[s("table",{staticClass:"w-full"},[e._m(0,!0),s("tbody",e._l(t.staticDetail,(function(r,a){return s("tr",{key:a,class:{"border-b border-b-white py-1.5":a!==t.staticDetail.length-1}},[s("td",{staticClass:"p-1.5"},[e._v(e._s(r.designerName))]),s("td",{staticClass:"p-1.5"},[e._v(e._s(r.itemName))]),s("td",{staticClass:"p-1.5"},[e._v("$"+e._s(r.price))]),s("td",{staticClass:"p-1.5"},e._l(r.helperList,(function(t,r){return s("p",{key:r},[e._v(" "+e._s(t.helperName)+" ")])})),0)])})),0)])])])])])})),0):e._e()])},v=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("設計師")]),s("th",[e._v("項目")]),s("th",[e._v("價格")]),s("th",[e._v("互助人")])])])}],b=(s(1539),s(4747),s(2222),{name:"customer-component-consumption",mounted:function(){this.getOrders()},deactivated:function(){window.removeEventListener("scroll",this.scrollGetOrders)},activated:function(){this.isEnd||window.addEventListener("scroll",this.scrollGetOrders)},data:function(){return{resultList:[],reviewResult:{},submitForm:{pageLimit:10,pageOffset:0},totalPage:0,isEnd:!1,isGetting:!1}},methods:{getOrders:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={customerId:e.$route.query.id?e.$route.query.id:"",pageLimit:e.submitForm.pageLimit,pageOffset:e.submitForm.pageOffset},t.next=3,e.$api.designerOrders(s);case 3:r=t.sent,a=r.data.data,a.orders.orders.length>0?a.orders.orders.forEach((function(t,s){t["isOpen"]=!1,s===a.orders.orders.length-1&&(e.reviewResult=a.orders)})):e.reviewResult=a.orders,e.totalPage=Math.ceil(a.orders.totalCount/10)-1,e.isEnd=1===Math.ceil(a.orders.totalCount/10),e.submitForm.pageOffset<e.totalPage&&window.addEventListener("scroll",e.scrollGetOrders);case 9:case"end":return t.stop()}}),t)})))()},scrollGetOrders:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a,i,o,l;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight,e.isEnd||e.isGetting||!(s+r>=a-50)){t.next=14;break}return e.isGetting=!0,e.submitForm.pageOffset+=1,e.submitForm.pageOffset>=e.totalPage&&(e.isEnd=!0,window.removeEventListener("scroll",e.scrollGetOrders)),i={customerId:e.$route.query.id?e.$route.query.id:"",pageLimit:10,pageOffset:e.submitForm.pageOffset},t.next=10,e.$api.designerOrders(i);case 10:o=t.sent,l=o.data.data,e.isGetting=!1,l.orders.orders.length>0&&l.orders.orders.forEach((function(t,s){t["isOpen"]=!1,s===l.orders.orders.length-1&&(e.reviewResult.orders=e.reviewResult.orders.concat(l.orders.orders))}));case 14:case"end":return t.stop()}}),t)})))()}}}),_=b,w=(0,u.Z)(_,f,v,!1,null,null,null),h=w.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[s("p",{staticClass:"before:contents-[''] relative my-3 pl-2 text-left before:absolute before:inset-0 before:h-full before:w-1 before:bg-primary"},[e._v("入金餘額")]),s("div",{staticClass:"mt-3 flex items-baseline text-second"},[s("p",{staticClass:"mr-2 pl-2"},[e._v("NT$")]),s("p",{staticClass:"text-[28px]"},[e._v(e._s(e.walletCash))])]),s("div",{staticClass:"my-4 flex gap-2 text-primary"},[s("div",{staticClass:"w-1/2 rounded-xl border border-solid border-primary p-1 duration-500",class:[1===e.seletedTab?"bg-primary text-white":""],on:{click:function(t){e.seletedTab=1,e.switchAddEventListener()},keypress:function(t){e.seletedTab=1}}},[e._v("入金紀錄")]),s("div",{staticClass:"w-1/2 rounded-xl border border-solid border-primary p-1 duration-500",class:[2===e.seletedTab?"bg-primary text-white":""],on:{click:function(t){e.seletedTab=2,e.switchAddEventListener()},keypress:function(t){e.seletedTab=2}}},[e._v("入金使用")])]),0===e.resultList.length&&1===e.seletedTab?s("p",{staticClass:"mt-20 text-sm text-stone-500"},[e._v("此客戶尚無入金紀錄")]):e._e(),0===e.resultUseList.length&&2===e.seletedTab?s("p",{staticClass:"mt-20 text-sm text-stone-500"},[e._v("此客戶尚無入金使用紀錄")]):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.seletedTab,expression:"seletedTab === 1"}],staticClass:"animate__animated animate__fadeIn animate__slow"},e._l(e.resultList,(function(t,r){return s("div",{key:"consumption1"+r,staticClass:"border-b border-solid border-primary/50 px-2 pb-4",class:{hidden:0===e.resultList.length}},[s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("日期")]),s("div",{staticClass:"w-3/5"},[e._v(e._s(e.$dayjs(t.date).format("YYYY/MM/DD")))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("入金金額")]),s("div",{staticClass:"w-3/5"},[e._v("$"+e._s(t.money))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("設計師")]),s("div",{staticClass:"w-3/5"},[e._v(e._s(t.Maker.name))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("付款方式")]),s("div",{staticClass:"w-3/5"},[e._v(e._s(t.payType))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("入金儲值手續費")]),s("div",{staticClass:"w-3/5"},[e._v(e._s(t.handlingFeeDecountPrice))])])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:2===e.seletedTab,expression:"seletedTab === 2"}],staticClass:"animate__animated animate__fadeIn animate__slow"},e._l(e.resultUseList,(function(t,r){return s("div",{key:"consumption"+r,staticClass:"border-b border-solid border-primary/50 px-2 pb-4"},[s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("帳單編號")]),s("div",{staticClass:"w-3/5"},[e._v(e._s(t.orderNo))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("帳單時間")]),s("div",{staticClass:"w-3/5"},[e._v(e._s(e.$dayjs(t.date).format("YYYY/MM/DD")))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("設計師")]),s("div",{staticClass:"w-3/5"},[e._v(e._s(t.Designer.name))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[e._v("使用金額")]),s("div",{staticClass:"w-3/5"},[e._v("$"+e._s(t.money))])])])})),0)])},x=[],g={name:"customer-component-income",mounted:function(){this.getWalletDepositRecords(),this.getWallet()},deactivated:function(){window.removeEventListener("scroll",this.scrollGetAddRecords),window.removeEventListener("scroll",this.scrollGetUseRecords)},activated:function(){this.addRecordsForm.isEnd||1!==this.seletedTab||window.addEventListener("scroll",this.scrollGetAddRecords),this.usedRecordsForm.isEnd||2!==this.seletedTab||window.addEventListener("scroll",this.scrollGetUseRecords)},data:function(){return{seletedTab:1,addRecordsForm:{pageOffset:0,totalPage:0,isEnd:!1,isGetting:!1},usedRecordsForm:{pageOffset:0,totalPage:0,isEnd:!1,isGetting:!1},resultList:[],resultUseList:[],walletCash:0}},methods:{switchAddEventListener:function(){1===this.seletedTab?(window.removeEventListener("scroll",this.scrollGetUseRecords),this.addRecordsForm.isEnd||window.addEventListener("scroll",this.scrollGetAddRecords)):(this.usedRecordsForm.isEnd||0===this.resultUseList.length||window.addEventListener("scroll",this.scrollGetUseRecords),this.usedRecordsForm.isEnd||0!==this.resultUseList.length||this.walletUseRecords(),window.removeEventListener("scroll",this.scrollGetAddRecords))},getWalletDepositRecords:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.resultList.length||!e.addRecordsForm.isEnd){t.next=2;break}return t.abrupt("return");case 2:return s={customerId:e.$route.query.id?e.$route.query.id:"",pageLimit:10,pageOffset:e.addRecordsForm.pageOffset,payType:[]},t.next=5,e.$api.walletDepositRecord(s);case 5:r=t.sent,a=r.data.data,e.addRecordsForm.totalPage=Math.ceil(a.walletDepositRecord.totalCount/10)-1,e.addRecordsForm.isEnd=1===Math.ceil(a.walletDepositRecord.totalCount/10),e.resultList=a.walletDepositRecord.record,e.addRecordsForm.pageOffset<e.addRecordsForm.totalPage&&window.addEventListener("scroll",e.scrollGetAddRecords);case 11:case"end":return t.stop()}}),t)})))()},scrollGetAddRecords:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a,i,o,l;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight,e.addRecordsForm.isEnd||e.addRecordsForm.isGetting||!(s+r>=a-50)){t.next=14;break}return e.addRecordsForm.isGetting=!0,e.addRecordsForm.pageOffset+=1,e.addRecordsForm.pageOffset>=e.addRecordsForm.totalPage&&(e.addRecordsForm.isEnd=!0,window.removeEventListener("scroll",e.scrollGetAddRecords)),i={customerId:e.$route.query.id?e.$route.query.id:"",pageLimit:10,pageOffset:e.addRecordsForm.pageOffset,payType:[]},t.next=10,e.$api.walletDepositRecord(i);case 10:o=t.sent,l=o.data.data,e.addRecordsForm.isGetting=!1,e.resultList=e.resultList.concat(l.walletDepositRecord.record);case 14:case"end":return t.stop()}}),t)})))()},walletUseRecords:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.resultUseList.length||!e.usedRecordsForm.isEnd){t.next=2;break}return t.abrupt("return");case 2:return s={customerId:e.$route.query.id?e.$route.query.id:"",pageLimit:10,pageOffset:e.usedRecordsForm.pageOffset,payType:[]},t.next=5,e.$api.walletUseRecord(s);case 5:r=t.sent,a=r.data.data,e.usedRecordsForm.totalPage=Math.ceil(a.walletUseRecord.totalCount/10)-1,e.usedRecordsForm.isEnd=1===Math.ceil(a.walletUseRecord.totalCount/10),e.resultUseList=a.walletUseRecord.record,e.usedRecordsForm.pageOffset<e.usedRecordsForm.totalPage&&window.addEventListener("scroll",e.scrollGetUseRecords);case 11:case"end":return t.stop()}}),t)})))()},scrollGetUseRecords:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a,i,o,l;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight,e.usedRecordsForm.isEnd||e.usedRecordsForm.isGetting||!(s+r>=a-50)){t.next=14;break}return e.usedRecordsForm.isGetting=!0,e.usedRecordsForm.pageOffset+=1,e.usedRecordsForm.pageOffset>=e.usedRecordsForm.totalPage&&(e.usedRecordsForm.isEnd=!0,window.removeEventListener("scroll",e.scrollGetUseRecords)),i={customerId:e.$route.query.id?e.$route.query.id:"",pageLimit:10,pageOffset:e.usedRecordsForm.pageOffset,payType:[]},t.next=10,e.$api.walletUseRecord(i);case 10:o=t.sent,l=o.data.data,e.usedRecordsForm.isGetting=!1,e.resultUseList=e.resultUseList.concat(l.walletUseRecord.record);case 14:case"end":return t.stop()}}),t)})))()},getWallet:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={customerId:e.$route.query.id?e.$route.query.id:""},t.next=3,e.$api.customerWallet(s);case 3:r=t.sent,a=r.data.data,e.walletCash=a.customerWallet;case 6:case"end":return t.stop()}}),t)})))()}}},y=g,R=(0,u.Z)(y,C,x,!1,null,null,null),D=R.exports,k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[s("div",{staticClass:"animate__animated animate__fadeIn animate__slow"},[e.resultList.length>0?s("div",{attrs:{id:"position"}},e._l(e.resultList,(function(t,r){return s("Ticket",{key:t.couponId,attrs:{id:t.couponId,title:t.couponName,canUse:t.totalCount,used:t.usedCount,price:t.singleCouponPrice,totalPrice:t.totalCount*t.singleCouponPrice,time:t.boughtDate,"data-aos":"zoom-in","data-aos-delay":100*r,"data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#position"},on:{openRecord:function(t){return e.handleOpenRecord(t)}}})})),1):s("div",[s("p",[e._v("尚無使用紀錄")])])]),s("C-Modal-Dialog",{attrs:{animationCss:"animate__animated animate__flipInY animate__fast"},model:{value:e.showRecord,callback:function(t){e.showRecord=t},expression:"showRecord"}},[s("h3",{staticClass:"mt-10 text-center font-bold"},[e._v("染髮卡券")]),e.recordDetail.usedCount&&0!==e.recordDetail.usedCount?s("table",{staticClass:"mt-5 w-full text-left text-sm"},[s("thead",{pre:!0},[s("tr",[s("th",{pre:!0,attrs:{class:"text-center"}},[e._v("項次")]),s("th",[e._v("使用日期")]),s("th",{pre:!0,attrs:{class:"text-center"}},[e._v("使用張數")])])]),s("tbody",e._l(e.recordDetail.usageRecord,(function(t,r){return s("tr",{key:r},[s("td",{staticClass:"text-center"},[e._v(e._s(r+1))]),s("td",[e._v(e._s(e.$dayjs(t.usedDate).format("YYYY/MM/DD HH:MM")))]),s("td",{staticClass:"text-center"},[e._v(e._s(t.usageCount))])])})),0)]):e._e(),e.recordDetail.usedCount&&0!==e.recordDetail.usedCount?s("div",{staticClass:"mt-10 grid w-full grid-cols-12 gap-2 text-sm"},[s("div",{pre:!0,attrs:{class:"col-span-9 text-right"}},[e._v("可用次數 :")]),s("div",{staticClass:"col-span-3"},[e._v(e._s(e.recordDetail.totalCount-e.recordDetail.usedCount)+"/"+e._s(e.recordDetail.totalCount))]),s("div",{pre:!0,attrs:{class:"col-span-9 text-right"}},[e._v("總金額 :")]),s("div",{staticClass:"col-span-3"},[e._v("$"+e._s(e.recordDetail.totalCount*e.recordDetail.singleCouponPrice))])]):s("p",{staticClass:"mx-10 mt-10 mb-14 text-center text-stone-500"},[e._v("此卡券尚無使用紀錄")])])],1)},E=[],F=(s(9826),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("div",{staticClass:"mb-2.5 w-full rounded-lg bg-white shadow-[0px_2px_2px_rgba(0,0,0,0.25)]"},[s("div",{staticClass:"grid grid-cols-12"},[s("div",{staticClass:"relative col-span-4 font-bold text-white",class:{"bg-[#FEB401]":e.canUse>0,"bg-[#aeaeae]":0===e.canUse}},[s("div",{staticClass:"absolute top-0 -left-2.5 z-40 h-[calc(100%+20px)] w-2.5"}),s("div",{staticClass:"5 absolute -bottom-2.5 left-0 z-40 h-2 w-2.5"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[26px] rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[52px] rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[78px] rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[104px] rounded-full bg-white"}),s("div",{staticClass:"flex h-full items-center"},[s("div",{staticClass:"flex w-full items-baseline justify-center py-2 px-4"},[s("p",{staticClass:"text-xs"},[e._v("NT$")]),s("p",{staticClass:"text-2xl"},[e._v(e._s(e.price))])])])]),s("div",{staticClass:"col-span-8 p-2 text-left"},[s("h4",{staticClass:"font-bold"},[e._v(e._s(e.title))]),s("p",{staticClass:"mb-1 text-sm text-[#666]"},[e._v("可用次數："+e._s(e.canUse-e.used)+"/"+e._s(e.canUse)+"(總金額:"+e._s(e.totalPrice)+")")]),s("div",{staticClass:"w-full border-b border-b-[#DDD]"}),s("p",{staticClass:"mb-1 text-xs text-[#666]"},[e._v("購買日期："+e._s(e.$dayjs(e.time).format("YYYY/MM/DD")))]),s("div",{staticClass:"flex items-center justify-end gap-1"},[s("font-awesome-icon",{staticClass:"text-xs text-[#57CDFF]",attrs:{icon:"fa-regular fa-circle-info"},on:{click:function(t){return e.openRecord(e.id)},keypress:function(t){return e.openRecord(e.id)}}}),s("span",{staticClass:"text-xs text-[#57CDFF]",on:{click:function(t){return e.openRecord(e.id)},keypress:function(t){return e.openRecord(e.id)}}},[e._v("使用紀錄")])],1)])])])])}),$=[],T=(s(9653),{name:"Ticket-index",props:{id:{type:String,default:function(){return""}},title:{type:String,default:function(){return""}},price:{type:Number,default:function(){return 0}},totalPrice:{type:Number,default:function(){return 0}},canUse:{type:Number,default:function(){return 0}},used:{type:Number,default:function(){return 0}},time:{type:Number,default:function(){return 0}}},methods:{openRecord:function(e){this.$emit("openRecord",e)}}}),L=T,O=(0,u.Z)(L,F,$,!1,null,null,null),I=O.exports,U={name:"customer-component-coupon",components:{Ticket:I},mounted:function(){this.getCoupons()},data:function(){return{resultList:[],showRecord:!1,recordDetail:{}}},methods:{handleOpenRecord:function(e){this.recordDetail=this.resultList.find((function(t){return t.couponId===e})),this.showRecord=!0},getCoupons:function(){var e=this;return(0,l.Z)((0,n.Z)().mark((function t(){var s,r;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.customerCouponBalanceReport(e.$route.query.id);case 2:s=t.sent,r=s.data,e.resultList=r.data.customerCouponBalanceReport[0]?r.data.customerCouponBalanceReport[0].data:[];case 5:case"end":return t.stop()}}),t)})))()}}},Z=U,G=(0,u.Z)(Z,k,E,!1,null,null,null),P=G.exports,j={name:"customer-userInfo",description:"客戶資料查詢的個人資料頁",metaInfo:{title:"名留",titleTemplate:"%s | 客戶資料查詢"},components:{Consumption:h,Coupon:P,Income:D,UserInfo:m},data:function(){return{seletedTab:"UserInfo",items:[{name:"個人資料",componentId:"UserInfo"},{name:"服務紀錄",componentId:"Consumption"},{name:"入金紀錄",componentId:"Income"},{name:"卡券紀錄",componentId:"Coupon"}]}},methods:{doRoute:function(e){this.$router.push({name:e})}},computed:{}},M=j,N=(0,u.Z)(M,r,a,!1,null,"80e76362",null),Y=N.exports}}]);
//# sourceMappingURL=172-legacy.75ec8ed7.js.map