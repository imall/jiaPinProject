{"version":3,"file":"js/864-legacy.716c99bb.js","mappings":"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","sources":["webpack://bos-designer/./src/views/Home/order/index.vue?9be9","webpack://bos-designer/src/views/Home/order/index.vue","webpack://bos-designer/./src/views/Home/order/index.vue?f5ec","webpack://bos-designer/./src/views/Home/order/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\"},[_c('C-Back-Nav',{attrs:{\"title\":((_vm.GETTER_MECHANTNAME !== '' ? _vm.GETTER_MECHANTNAME + ' - ' : '') + \"預約\")}}),_c('section',{staticClass:\"relative z-0 mt-[52px] p-3\"},[_c('div',{staticClass:\"mb-4 flex items-center justify-between\"},[_c('div',{staticClass:\"rounded-[10px] bg-primary px-[14px] py-1 text-white\",on:{\"click\":function($event){return _vm.$router.push({name: 'Order-add'})},\"keypress\":function($event){return _vm.$router.push({name: 'Order-add'})}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"fa-regular fa-circle-plus\"}}),_c('span',{staticClass:\"ml-[6px]\"},[_vm._v(\"新增預約\")])],1),_c('div',{staticClass:\" flex items-center gap-2 text-left\"},[_c('div',{staticClass:\"inline-block w-fit cursor-pointer rounded-[10px] bg-primary px-2 py-1 text-white\",on:{\"click\":function($event){return _vm.$router.push({name: 'Order-list'})},\"keypress\":function($event){return _vm.$router.push({name: 'Order-list'})}}},[_c('span',{staticClass:\"mr-[6px]\"},[_vm._v(\"列表查詢\")]),_c('font-awesome-icon',{attrs:{\"icon\":\"fa-regular fa-list\"}})],1)])]),_c('div',{staticClass:\"mb-4 flex items-center justify-between gap-2\"},[_c('C-Input',{ref:\"inputVal\",staticClass:\"mb-0 w-full\",attrs:{\"placeholder\":'搜尋姓名、電話、代號'},on:{\"doFunction\":_vm.getOrders},scopedSlots:_vm._u([{key:\"endIcon\",fn:function(){return [(_vm.searchForm.keyword !== '')?_c('font-awesome-icon',{staticClass:\" text-rose-600\",attrs:{\"icon\":\"fa-regular fa-xmark\"},on:{\"click\":_vm.doInitSearch}}):_vm._e(),_c('font-awesome-icon',{attrs:{\"icon\":\"fa-regular fa-magnifying-glass\"},on:{\"click\":_vm.getOrders}})]},proxy:true}]),model:{value:(_vm.searchForm.keyword),callback:function ($$v) {_vm.$set(_vm.searchForm, \"keyword\", $$v)},expression:\"searchForm.keyword\"}})],1),_c('transition',{attrs:{\"name\":\"collapseTransition\"}},[_c('vc-date-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isActiveCalendar),expression:\"isActiveCalendar\"}],staticClass:\"relative mt-[50px]\",attrs:{\"locale\":\"zh-TW\",\"select-attribute\":_vm.selectedAttribute,\"is-expanded\":\"\",\"attributes\":_vm.attrs,\"masks\":_vm.masks},on:{\"update:to-page\":function($event){return _vm.swipeMonth($event)}},scopedSlots:_vm._u([{key:\"header\",fn:function(ref){\nvar year = ref.year;\nvar monthLabel = ref.monthLabel;\nreturn [_c('div',{staticClass:\"absolute inset-x-0 top-[-50px] w-full\"},[_c('div',{staticClass:\"flex items-center justify-center\"},[_c('span',{staticClass:\"font-bold\"},[_vm._v(_vm._s(_vm._f(\"dateFormat\")(year))+\"年\")]),_c('span',{staticClass:\"ml-2 text-2xl font-bold\"},[_vm._v(_vm._s(monthLabel))])])])]}},{key:\"header-left-button\",fn:function(){return [_c('font-awesome-icon',{staticClass:\"absolute left-0 top-[-46px] text-2xl text-primary\",attrs:{\"icon\":\"fa-solid fa-angle-left\"},on:{\"click\":function($event){return _vm.preNextMonth(-1)}}})]},proxy:true},{key:\"header-right-button\",fn:function(){return [_c('font-awesome-icon',{staticClass:\"absolute right-0 top-[-46px] text-2xl text-primary\",attrs:{\"icon\":\"fa-solid fa-angle-right\"},on:{\"click\":function($event){return _vm.preNextMonth(1)}}})]},proxy:true},{key:\"day-content\",fn:function(ref){\nvar day = ref.day;\nvar attributes = ref.attributes;\nreturn [_c('div',{staticClass:\"z-10 flex flex-col\"},[_c('div',[_c('p',{staticClass:\"day-label relative my-2 text-sm text-gray-900\",class:[ _vm.$dayjs(_vm.searchForm.selectedDate).valueOf() === _vm.$dayjs(day.date).valueOf()\n                ? ' before:contents-[``] before:m-auto  before:absolute before:inline-block before:h-[24px] before:w-[24px] before:top-[-1px] before:left-0 before:right-0 before:bg-[#feb401] before:z-[-1] before:rounded-[50%]'\n                : ''],on:{\"click\":function($event){_vm.searchForm.selectedDate = _vm.$dayjs(day.date).valueOf()},\"keypress\":function($event){_vm.searchForm.selectedDate = _vm.$dayjs(day.date).valueOf()}}},[_vm._v(_vm._s(day.day))])]),_c('div',{staticClass:\"m-auto inline-block max-w-[13vmin] break-all\"},[(_vm.hasOnlyOrder(attributes))?_c('span',{staticClass:\"m-[2px] inline-block h-[5px] w-[5px] rounded-[50%] bg-[#feb401] content-['']\"}):_vm._e()])])]}}]),model:{value:(_vm.searchForm.selectedDate),callback:function ($$v) {_vm.$set(_vm.searchForm, \"selectedDate\", $$v)},expression:\"searchForm.selectedDate\"}})],1),_c('div',{staticClass:\"text-left text-sm\"},[_c('p',{staticClass:\"before:contents-[''] relative my-3 pl-2 before:absolute before:inset-0 before:h-full before:w-1 before:bg-primary\"},[_vm._v(\"待審查(\"+_vm._s(_vm.isReviewResult)+\")\")]),(_vm.isReviewResult)?_c('div',_vm._l((_vm.reviewResult),function(reviewItem,index){return _c('div',{key:(\"reviewItem\" + index),staticClass:\"mb-3 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 py-1 pl-2\",on:{\"click\":function($event){return _vm.doRoute(reviewItem,true)},\"keypress\":function($event){return _vm.doRoute(reviewItem,true)}}},[_c('div',{staticClass:\"w-3/12\"},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"fa-regular fa-calendar-days\"}}),_c('span',[_vm._v(_vm._s(_vm._f(\"dateFmtROCMMDD\")(reviewItem.date)))])],1),_c('div',{staticClass:\"w-3/12\"},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"fa-solid fa-clock-five\"}}),_c('span',[_vm._v(_vm._s(_vm._f(\"dateFmtHm\")(reviewItem.date)))])],1),_c('div',{staticClass:\"w-3/12 overflow-hidden text-ellipsis whitespace-nowrap\"},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"fa-solid fa-user\"}}),_c('span',[_vm._v(_vm._s(reviewItem.customer.name || '--'))])],1),_c('div',{staticClass:\"w-3/12 min-w-[42px]\"},[_c('span',{staticClass:\"text-sucessText\"},[_vm._v(_vm._s(reviewItem.status))])]),_c('div',[_c('font-awesome-icon',{attrs:{\"icon\":\"fa-solid fa-angle-right\"}})],1)])}),0):_c('div',{staticClass:\"my-3  pl-2\"},[_vm._v(\"目前沒有待審查的預約\")])]),_c('div',{staticClass:\"text-left text-sm\"},[_c('p',{staticClass:\"before:contents-[''] relative my-3 pl-2 before:absolute before:inset-0 before:h-full before:w-1 before:bg-primary\"},[_vm._v(\"預約明細(\"+_vm._s(_vm.isOrderResult)+\")\")]),(_vm.isOrderResult)?_c('div',_vm._l((_vm.orderResult),function(reviewItem,index){return _c('div',{key:(\"reviewItem\" + index),staticClass:\"mb-3 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 py-1 pl-2\",on:{\"click\":function($event){return _vm.doRoute(reviewItem,false)},\"keypress\":function($event){return _vm.doRoute(reviewItem,false)}}},[_c('div',{staticClass:\"w-3/12\"},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"fa-regular fa-calendar-days\"}}),_c('span',[_vm._v(_vm._s(_vm._f(\"dateFmtROCMMDD\")(reviewItem.date)))])],1),_c('div',{staticClass:\"w-2/12\"},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"fa-solid fa-clock-five\"}}),_c('span',[_vm._v(_vm._s(_vm._f(\"dateFmtHm\")(reviewItem.date)))])],1),_c('div',{staticClass:\"w-3/12 overflow-hidden text-ellipsis whitespace-nowrap\"},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"fa-solid fa-user\"}}),_c('span',[_vm._v(_vm._s(reviewItem.customer.name || '--'))])],1),_c('div',{staticClass:\"w-3/12 min-w-[42px]\"},[_c('span',[_vm._v(_vm._s(reviewItem.status))])]),_c('div',[_c('font-awesome-icon',{attrs:{\"icon\":\"fa-solid fa-angle-right\"}})],1)])}),0):_c('div',{staticClass:\"my-3  pl-2\"},[_vm._v(\"目前沒有任何預約\")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <main class=\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\">\n    <C-Back-Nav :title=\"`${GETTER_MECHANTNAME !== '' ? GETTER_MECHANTNAME + ' - ' : ''}預約`\"></C-Back-Nav>\n    <section class=\"relative z-0 mt-[52px] p-3\">\n\n      <div class=\"mb-4 flex items-center justify-between\">\n        <div class=\"rounded-[10px] bg-primary px-[14px] py-1 text-white\" @click=\"$router.push({name: 'Order-add'})\" @keypress=\"$router.push({name: 'Order-add'})\">\n          <font-awesome-icon icon=\"fa-regular fa-circle-plus\" />\n          <span class=\"ml-[6px]\">新增預約</span>\n        </div>\n        <div class=\" flex items-center gap-2 text-left\">\n          <div class=\"inline-block w-fit cursor-pointer rounded-[10px] bg-primary px-2 py-1 text-white\" @click=\"$router.push({name: 'Order-list'})\" @keypress=\"$router.push({name: 'Order-list'})\">\n            <span class=\"mr-[6px]\">列表查詢</span>\n            <font-awesome-icon icon=\"fa-regular fa-list\" />\n          </div>\n          <!-- <font-awesome-icon :icon=\"isActiveCalendar ? 'fa-regular fa-list' : 'fa-regular fa-calendar-days'\" class=\"w-[24px] text-2xl\" @click=\"isActiveCalendar = !isActiveCalendar\" /> -->\n        </div>\n      </div>\n\n      <div class=\"mb-4 flex items-center justify-between gap-2\">\n        <C-Input v-model=\"searchForm.keyword\" @doFunction=\"getOrders\" :placeholder=\"'搜尋姓名、電話、代號'\" class=\"mb-0 w-full\"  ref=\"inputVal\">\n          <template v-slot:endIcon>\n            <font-awesome-icon v-if=\"searchForm.keyword !== ''\" @click=\"doInitSearch\" icon=\"fa-regular fa-xmark\" class=\" text-rose-600\"/>\n            <font-awesome-icon @click=\"getOrders\" icon=\"fa-regular fa-magnifying-glass\"/>\n          </template>\n        </C-Input>\n      </div>\n\n      <transition name=\"collapseTransition\">\n        <vc-date-picker locale=\"zh-TW\" @update:to-page=\"swipeMonth($event)\" v-show=\"isActiveCalendar\" v-model=\"searchForm.selectedDate\" :select-attribute=\"selectedAttribute\" is-expanded :attributes=\"attrs\" :masks=\"masks\" class=\"relative mt-[50px]\">\n          <template v-slot:header=\"{year,monthLabel}\">\n            <div class=\"absolute inset-x-0 top-[-50px] w-full\">\n              <div class=\"flex items-center justify-center\">\n                <span class=\"font-bold\">{{year |dateFormat }}年</span>\n                <span class=\"ml-2 text-2xl font-bold\">{{monthLabel}}</span>\n              </div>\n            </div>\n          </template>\n\n          <template v-slot:header-left-button>\n            <font-awesome-icon @click=\"preNextMonth(-1)\" icon=\"fa-solid fa-angle-left\" class=\"absolute left-0 top-[-46px] text-2xl text-primary\"/>\n          </template>\n\n          <template v-slot:header-right-button>\n            <font-awesome-icon @click=\"preNextMonth(1)\" icon=\"fa-solid fa-angle-right\" class=\"absolute right-0 top-[-46px] text-2xl text-primary\"/>\n          </template>\n          <!-- eslint-disable-next-line vue/no-unused-vars -->\n          <template v-slot:day-content=\"{ day, attributes }\">\n            <div class=\"z-10 flex flex-col\">\n              <div>\n                <p\n                  class=\"day-label relative my-2 text-sm text-gray-900\"\n                  :class=\"[ $dayjs(searchForm.selectedDate).valueOf() === $dayjs(day.date).valueOf()\n                  ? ' before:contents-[``] before:m-auto  before:absolute before:inline-block before:h-[24px] before:w-[24px] before:top-[-1px] before:left-0 before:right-0 before:bg-[#feb401] before:z-[-1] before:rounded-[50%]'\n                  : '']\"\n                  @click=\"searchForm.selectedDate = $dayjs(day.date).valueOf()\"\n                  @keypress=\"searchForm.selectedDate = $dayjs(day.date).valueOf()\"\n                >{{ day.day }}</p>\n              </div>\n                <!-- @click=\"searchForm.selectedDate = day.date\" -->\n              <div class=\"m-auto inline-block max-w-[13vmin] break-all\">\n                <span v-if=\"hasOnlyOrder(attributes)\" class=\"m-[2px] inline-block h-[5px] w-[5px] rounded-[50%] bg-[#feb401] content-['']\"></span>\n                <!-- <template v-for=\"(attr,index) in attributes\">\n                  <span\n                    v-if=\"!attr.highlight\"\n                    :key=\"attr.key + index\"\n                    :data-attr=\"attr.customData ? attr.customData.class:''\"\n                    v-ripple=\"100\"\n                    class=\"m-[2px] inline-block h-[5px] w-[5px] rounded-[50%] bg-[#feb401] content-['']\"\n                  >\n                  {{attr.customData}}\n                  </span>\n                </template> -->\n              </div>\n            </div>\n          </template>\n        </vc-date-picker>\n      </transition>\n\n      <div class=\"text-left text-sm\">\n        <p class=\"before:contents-[''] relative my-3 pl-2 before:absolute before:inset-0 before:h-full before:w-1 before:bg-primary\">待審查({{isReviewResult}})</p>\n        <div v-if=\"isReviewResult\">\n\n          <div v-for=\"(reviewItem, index) in reviewResult\" :key=\"`reviewItem${index}`\" @click=\"doRoute(reviewItem,true)\" @keypress=\"doRoute(reviewItem,true)\" class=\"mb-3 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 py-1 pl-2\">\n            <div class=\"w-3/12\">\n              <font-awesome-icon icon=\"fa-regular fa-calendar-days\" class=\"mr-1\" />\n              <span>{{reviewItem.date | dateFmtROCMMDD}}</span>\n              </div>\n            <div class=\"w-3/12\">\n              <font-awesome-icon icon=\"fa-solid fa-clock-five\" class=\"mr-1\" />\n              <span>{{reviewItem.date | dateFmtHm}}</span>\n            </div>\n            <div class=\"w-3/12 overflow-hidden text-ellipsis whitespace-nowrap\">\n              <font-awesome-icon icon=\"fa-solid fa-user\" class=\"mr-1\" />\n              <span>{{reviewItem.customer.name || '--'}}</span>\n              </div>\n            <div class=\"w-3/12 min-w-[42px]\">\n              <span class=\"text-sucessText\">{{reviewItem.status}}</span>\n            </div>\n            <div>\n              <font-awesome-icon icon=\"fa-solid fa-angle-right\" />\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"my-3  pl-2\">目前沒有待審查的預約</div>\n      </div>\n\n      <div class=\"text-left text-sm\">\n        <p class=\"before:contents-[''] relative my-3 pl-2 before:absolute before:inset-0 before:h-full before:w-1 before:bg-primary\">預約明細({{isOrderResult}})</p>\n        <div v-if=\"isOrderResult\">\n\n          <div v-for=\"(reviewItem, index) in orderResult\" :key=\"`reviewItem${index}`\" @click=\"doRoute(reviewItem,false)\" @keypress=\"doRoute(reviewItem,false)\" class=\"mb-3 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 py-1 pl-2\">\n            <div class=\"w-3/12\">\n              <font-awesome-icon icon=\"fa-regular fa-calendar-days\" class=\"mr-1\" />\n              <span>{{reviewItem.date | dateFmtROCMMDD}}</span>\n              </div>\n            <div class=\"w-2/12\">\n              <font-awesome-icon icon=\"fa-solid fa-clock-five\" class=\"mr-1\" />\n              <span>{{reviewItem.date | dateFmtHm }}</span>\n            </div>\n            <div class=\"w-3/12 overflow-hidden text-ellipsis whitespace-nowrap\">\n              <font-awesome-icon icon=\"fa-solid fa-user\" class=\"mr-1\" />\n              <span>{{reviewItem.customer.name || '--'}}</span>\n              </div>\n            <div class=\"w-3/12 min-w-[42px]\">\n              <span>{{reviewItem.status}}</span>\n            </div>\n            <div>\n              <font-awesome-icon icon=\"fa-solid fa-angle-right\"/>\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"my-3  pl-2\">目前沒有任何預約</div>\n      </div>\n\n    </section>\n\n  </main>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\n\nexport default {\n  name: 'order-index',\n  description: '預約的首頁',\n  metaInfo: {\n    title: '名留',\n    titleTemplate: '%s | 預約',\n  },\n  mounted() {\n    this.init();\n  },\n  data() {\n    return {\n      masks: {\n        weekdays: 'WWW',\n      },\n      isActiveCalendar: true, // 開關月曆\n      searchForm: {\n        keyword: '', // 關鍵字搜尋\n        // isAccurate: false, // false: 精準搜尋模式 ；true 模糊查詢 // 2022/09/12會議後調整\n        isAccurate: true, // false: DESC ；true ASC // 用作顯示過往預約紀錄\n        selectedDate: this.$dayjs(this.$dayjs().format('YYYY-MM-DD')).valueOf(),\n      },\n\n      monthkyOrdersDate: { // 以每月的訂單來放到arrts裡面\n        start: this.$dayjs(new Date()).startOf('month').valueOf(),\n        end: this.$dayjs(new Date()).endOf('month').valueOf(),\n      },\n\n      attrs: [], // 月曆點點 紅點代表有待審核\n\n      reviewResult: [], // 待審核\n      orderResult: [], // 預約成功、設計師已取消、已完成\n\n      selectedAttribute: { // 日曆選定的日期樣式\n        highlight: {\n          style: {\n            background: 'transparent',\n          },\n          fillMode: 'solid',\n        },\n      },\n    };\n  },\n  methods: {\n    async init() {\n      await Promise.all([this.getMonthlyOrders(), this.getOrders()]).then(() => { });\n    },\n    async doInitSearch() {\n      this.searchForm.keyword = '';\n      await this.getOrders();\n    },\n    async getMonthlyOrders() {\n      console.log('getMonthlyOrders');\n      const res = await this.$api.orders({\n        startDate: this.$dayjs(this.monthkyOrdersDate.start).isValid() ? this.$dayjs(this.monthkyOrdersDate.start).valueOf() : '',\n        endDate: this.$dayjs(this.monthkyOrdersDate.end).isValid() ? this.$dayjs(this.monthkyOrdersDate.end).valueOf() : '',\n        employeeId: this.userInfo.user.id,\n        isReserved: true,\n      });\n      const { data, errors } = res.data;\n      if (errors) return {};\n      this.attrs = Array.isArray(data.orders.orders) ? data.orders.orders.flatMap((orderItem) => (orderItem.status === '待審核' ? [\n        {\n          key: `${orderItem.id}`,\n          // dot: {\n          //   color: 'red',\n          //   fillMode: 'solid',\n          // },\n          customData: {\n            class: 'red',\n          },\n          dates: orderItem.date,\n        },\n      ] : [\n        {\n          key: `${orderItem.id}`,\n          // dot: {\n          //   style: {\n          //     background: 'red',\n          //   },\n          //   fillMode: 'solid',\n          // },\n          dates: orderItem.date,\n        },\n      ])) : [];\n      this.$forceUpdate();\n      return res;\n    },\n    async getOrders() {\n      const res = await this.$api.orders({\n        startDate: this.$dayjs(this.searchForm.selectedDate).isValid() ? this.$dayjs(this.searchForm.selectedDate).valueOf() : '',\n        endDate: this.$dayjs(this.searchForm.selectedDate).isValid() ? this.$dayjs(this.searchForm.selectedDate).valueOf() : '',\n        employeeId: this.userInfo.user.id,\n        orderKeyword: {\n          keyword: typeof this.searchForm.keyword === 'string' ? this.searchForm.keyword.toLocaleLowerCase() : this.searchForm.keyword,\n          isFuzzySearch: true, // 因為api跟畫面上是相反的\n        },\n        isReserved: true,\n      });\n      const { data, errors } = res.data;\n      if (errors) return {};\n      this.reviewResult = data.orders.orders.filter((order) => order.status === '待審核');\n      this.orderResult = data.orders.orders.filter((order) => order.status !== '待審核');\n      this.$forceUpdate();\n      return res;\n    },\n    doRoute(item, isReview) {\n      this.$router.push({ name: 'Order-edit', query: { id: item.id, isReview } });\n    },\n    preNextMonth(num) {\n      this.monthkyOrdersDate.start = this.$dayjs(this.$dayjs(this.monthkyOrdersDate.start).add(num, 'month')).startOf('month').format('YYYY-MM-DD');\n      this.monthkyOrdersDate.end = this.$dayjs(this.$dayjs(this.monthkyOrdersDate.end).add(num, 'month')).endOf('month').format('YYYY-MM-DD');\n    },\n    swipeMonth(e) {\n      const y = e.year;\n      const m = e.month - 1;\n      const firstDay = new Date(y, m, 1);\n      const lastDay = new Date(y, m + 1, 0);\n      const starDate = this.$dayjs(firstDay).format('YYYY-MM-DD');\n      const endDate = this.$dayjs(lastDay).format('YYYY-MM-DD');\n\n      this.monthkyOrdersDate.start = starDate;\n      this.monthkyOrdersDate.end = endDate;\n    },\n  },\n  computed: {\n    ...mapState('userInfo', ['userInfo', 'currentMechantId']),\n    ...mapGetters('userInfo', ['GETTER_MECHANTNAME']),\n    isReviewResult() {\n      return this.reviewResult.length;\n    },\n    hasOnlyOrder() {\n      return (attr) => {\n        let status = false;\n        if (Array.isArray(attr) && attr.length === 1) {\n          status = !attr[0].highlight;\n        }\n        if (Array.isArray(attr) && attr.length > 1) {\n          status = true;\n        }\n\n        return status;\n      };\n    },\n    isOrderResult() {\n      return this.orderResult.length;\n    },\n  },\n  watch: {\n    'searchForm.selectedDate': {\n      handler() {\n        if (!this.searchForm.selectedDate) return;\n        this.getOrders();\n      },\n    },\n    monthkyOrdersDate: {\n      deep: true,\n      handler() {\n        this.getMonthlyOrders();\n      },\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// ::v-deep * {outline: 1px solid;}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=249b794b&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=249b794b&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"249b794b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","GETTER_MECHANTNAME","on","$event","$router","push","name","_v","ref","getOrders","scopedSlots","_u","key","fn","searchForm","keyword","doInitSearch","_e","proxy","model","value","callback","$$v","$set","expression","directives","rawName","selectedAttribute","masks","swipeMonth","year","monthLabel","_s","_f","preNextMonth","day","attributes","class","$dayjs","selectedDate","valueOf","date","hasOnlyOrder","isReviewResult","_l","reviewItem","index","doRoute","customer","status","isOrderResult","staticRenderFns","description","metaInfo","title","titleTemplate","mounted","data","weekdays","isActiveCalendar","isAccurate","monthkyOrdersDate","start","end","reviewResult","orderResult","highlight","style","background","fillMode","methods","init","Promise","getMonthlyOrders","console","startDate","endDate","employeeId","isReserved","res","errors","customData","dates","orderKeyword","isFuzzySearch","item","isReview","query","id","num","e","computed","mapState","mapGetters","watch","handler","deep","component"],"sourceRoot":""}