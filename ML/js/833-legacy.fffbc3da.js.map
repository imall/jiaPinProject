{"version":3,"file":"js/833-legacy.fffbc3da.js","mappings":"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","sources":["webpack://bos-designer/./src/views/Home/index.vue?fb8d","webpack://bos-designer/src/views/Home/index.vue","webpack://bos-designer/./src/views/Home/index.vue?a286","webpack://bos-designer/./src/views/Home/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"h-full w-full overflow-auto\"},[_c('section',{staticClass:\"relative box-border min-h-screen w-full overflow-auto pb-[84px] md:rounded-2xl\"},[_c('nav',{staticClass:\"relative mt-[41px] flex w-full items-end justify-between p-[14px]\"},[_c('img',{attrs:{\"src\":require(\"@/static/images/Group.svg\"),\"alt\":\"\"}}),_c('C-Select',{staticClass:\"w-[130px] text-center\",attrs:{\"list\":_vm.merchentList,\"placeholder\":'選擇店家',\"item-text\":\"name\",\"item-value\":\"id\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}})],1),_c('div',{staticClass:\"m-auto my-6 mx-[14px] box-border flex h-fit w-[calc(100%-28px)] flex-wrap items-center justify-between rounded-[10px] border border-black py-[7px] px-4\"},[_c('div',{staticClass:\"flex items-center justify-center\"},[_c('font-awesome-icon',{staticClass:\"mr-4 text-2xl\",attrs:{\"icon\":\"fa-regular fa-user\"}}),_c('div',{staticClass:\" text-lg leading-8\"},[_vm._v(\"設計師: \"),_c('span',{staticClass:\"ml-2\"},[_vm._v(_vm._s(_vm.userInfo ? _vm.userInfo.user.name: ''))])])],1),_c('font-awesome-icon',{staticClass:\"cursor-pointer text-2xl\",attrs:{\"icon\":\"fa-regular fa-right-from-bracket\"},on:{\"click\":_vm.doLogout}})],1),_c('div',{staticClass:\"m-auto box-border flex h-fit w-full flex-wrap justify-around gap-4 px-[14px]\"},[_vm._l((_vm.servicesList),function(service,index){return [(_vm.isAuthority(service.itemName))?_c('div',{key:service.routeName + index,staticClass:\"flex h-[100px] w-[165px] cursor-pointer flex-col items-center justify-center gap-3 rounded-[10px] border border-solid border-[#AEAEAE] bg-white shadow-2xl\",on:{\"click\":function($event){return _vm.doRoute(service.routeName)},\"keydown\":function($event){return _vm.doRoute(service.routeName)}}},[_c('img',{attrs:{\"src\":service.iconSrc,\"alt\":\"\"}}),_c('div',[_vm._v(_vm._s(service.itemName === '設計師日報表' ? '報表': service.itemName))])]):_vm._e()]})],2),_c('div',{staticClass:\"fixed bottom-5 right-4 flex h-14 w-14 cursor-pointer items-center justify-center rounded-[28px] border border-solid  bg-white shadow-xl\",on:{\"click\":_vm.shareLink,\"keypress\":_vm.shareLink}},[_c('font-awesome-icon',{staticClass:\"mr-1 text-4xl text-[#365cad]\",attrs:{\"icon\":\"fa-regular fa-share-nodes\"}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <main class=\"h-full w-full overflow-auto\">\n    <section class=\"relative box-border min-h-screen w-full overflow-auto pb-[84px] md:rounded-2xl\">\n      <nav class=\"relative mt-[41px] flex w-full items-end justify-between p-[14px]\">\n        <img src=\"@/static/images/Group.svg\" alt=\"\">\n        <C-Select class=\"w-[130px] text-center\" :list=\"merchentList\" v-model=\"selected\" :placeholder=\"'選擇店家'\" item-text=\"name\" item-value=\"id\"></C-Select>\n      </nav>\n      <div class=\"m-auto my-6 mx-[14px] box-border flex h-fit w-[calc(100%-28px)] flex-wrap items-center justify-between rounded-[10px] border border-black py-[7px] px-4\">\n        <div class=\"flex items-center justify-center\">\n          <font-awesome-icon icon=\"fa-regular fa-user\" class=\"mr-4 text-2xl\" />\n          <div class=\" text-lg leading-8\">設計師: <span class=\"ml-2\">{{userInfo ? userInfo.user.name: ''}}</span></div>\n        </div>\n        <font-awesome-icon icon=\"fa-regular fa-right-from-bracket\" class=\"cursor-pointer text-2xl\" @click=\"doLogout\"/>\n      </div>\n      <div class=\"m-auto box-border flex h-fit w-full flex-wrap justify-around gap-4 px-[14px]\">\n        <template  v-for=\"(service,index) in servicesList\">\n          <div v-if=\"isAuthority(service.itemName)\" @click=\"doRoute(service.routeName)\" @keydown=\"doRoute(service.routeName)\" class=\"flex h-[100px] w-[165px] cursor-pointer flex-col items-center justify-center gap-3 rounded-[10px] border border-solid border-[#AEAEAE] bg-white shadow-2xl\" :key=\"service.routeName + index\">\n            <img :src=\"service.iconSrc\" alt=\"\">\n            <!-- 這邊名流後端需要調整 2022/09/13 -->\n            <div>{{service.itemName === '設計師日報表' ? '報表': service.itemName}}</div>\n          </div>\n        </template>\n      </div>\n      <div class=\"fixed bottom-5 right-4 flex h-14 w-14 cursor-pointer items-center justify-center rounded-[28px] border border-solid  bg-white shadow-xl\" @click=\"shareLink\" @keypress=\"shareLink\">\n          <font-awesome-icon icon=\"fa-regular fa-share-nodes\" class=\"mr-1 text-4xl text-[#365cad]\" />\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex';\nimport { isJSON } from '@/utils/index';\n\nexport default {\n  name: 'home-index',\n  metaInfo: {\n    title: '名留',\n    titleTemplate: '%s | 首頁',\n  },\n  data() {\n    return {\n      // isShare: false,:class=\"{'w-[calc(100vw-20px)]':isShare}\" @click=\"isShare = !isShare\" @keypress=\"isShare = !isShare\"\n      selected: '',\n      merchentList: [],\n      servicesList: [\n        { itemName: '預約審查', routeName: 'Order', iconSrc: require('../../static/images/calendar-check-regular.svg') }, // eslint-disable-line global-require\n        { itemName: '打卡', routeName: 'Punch', iconSrc: require('../../static/images/clock-regular.svg') }, // eslint-disable-line global-require\n        { itemName: '行事曆', routeName: 'ScheduleBreak', iconSrc: require('../../static/images/calendar-days-regular.svg') }, // eslint-disable-line global-require\n        // { itemName: '價目表', routeName: 'PriceList', iconSrc: require('../../static/images/file-invoice-dollar-regular.svg') }, // eslint-disable-line global-require\n        // { itemName: '發優惠券', routeName: 'Coupon', iconSrc: require('../../static/images/ticket-regular.svg') }, // eslint-disable-line global-require\n        // { itemName: '發紅利點數', routeName: 'Bonus', iconSrc: require('../../static/images/point.svg') }, // eslint-disable-line global-require\n        { itemName: '設計師日報表', routeName: 'Report', iconSrc: require('../../static/images/chart-mixed-solid.svg') }, // eslint-disable-line global-require\n        { itemName: '客戶資料查詢', routeName: 'Customer', iconSrc: require('../../static/images/users-light.svg') }, // eslint-disable-line global-require\n      ],\n    };\n  },\n  computed: {\n    ...mapState('userInfo', ['userInfo', 'currentMechantId', 'userAuthorizeList']),\n    isAuthority() {\n      return (name) => this.userAuthorizeList.find((item) => item.pageName === name && item.authority);\n    },\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    ...mapActions('userInfo', ['SET_USER_PROFILE', 'SET_USER_CURRENT_MERCHANTID', 'SET_USER_AUTHORIZELIST']),\n    async shareLink() {\n      const url = `${window.location.protocol}//${window.location.hostname}/login/?merchantId=${this.currentMechantId}&designerId=${this.userInfo.user.id}`;\n\n      if (navigator.share) {\n        await navigator.share({\n          title: 'MINGLIU GROUP 名留集團',\n          text: `MINGLIU GROUP 名留集團 設計師預約 設計師: ${this.userInfo.user.name}`,\n          url,\n        })\n          .then(() => console.log('success'))\n          .catch((err) => {\n            window.open(url);\n            console.error(err);\n          });\n      } else {\n        window.open(url);\n      }\n    },\n    doRoute(routName) {\n      this.$router.push({ name: routName });\n    },\n    async init() {\n      await Promise.all([this.getMechants()]).then(() => {});\n      const [firstUserMerchant] = this.userInfo.user.merchants;\n      this.selected = this.currentMechantId || firstUserMerchant.id || '';\n    },\n    async getMechants() {\n      const res = await this.$api.user({ id: this.userInfo.user.id });\n      const { data, errors } = res.data;\n      if (errors) return;\n      this.merchentList = data.user.merchants;\n    },\n    doLogout() {\n      this.$swal.fire({\n        icon: 'question',\n        title: '您確定要登出嗎?',\n        showConfirmButton: true,\n        showCancelButton: true,\n        showClass: {\n          popup: 'animate__animated animate__fadeInDown',\n        },\n        hideClass: {\n          popup: 'animate__animated animate__fadeOutUp animate__faster',\n        },\n      }).then(async (res) => {\n        if (res.isConfirmed) {\n          const resp = await this.$api.userLogout();\n          const { data, errors } = resp.data;\n          if (errors) return;\n          if (!data.userLogout) return;\n          await this.SET_USER_PROFILE(null);\n          this.$swal.fire({\n            icon: 'success',\n            title: '登出成功',\n            showConfirmButton: false,\n            showCancelButton: false,\n            showClass: {\n              popup: 'animate__animated animate__fadeInDown',\n            },\n            hideClass: {\n              popup: 'animate__animated animate__fadeOutUp animate__faster',\n            },\n            timer: 3000,\n            timerProgressBar: true,\n          }).then(() => {\n            this.$router.replace({ name: 'Login' });\n          });\n        }\n      });\n    },\n    async getMe() {\n      const resp = await this.$api.me();\n      const { data, errors } = resp.data;\n      if (errors) return;\n      try {\n        this.merchantIdentity = data.me.merchantIdentity;\n      } catch {\n        this.merchantIdentity = {};\n      }\n    },\n    async getMerchantAuthorities() {\n      const resp = await this.$api.getMerchantAuthorities();\n      const { data, errors } = resp.data;\n      if (errors) return;\n      try {\n        this.merchantAuthorities = data.getMerchantAuthorities;\n      } catch {\n        this.merchantAuthorities = [];\n      }\n    },\n    permissionReportList() {\n      return new Promise((resolve) => {\n        const identityAuthorities = this.merchantAuthorities.find((item) => item.id === this.merchantIdentity.authorityId);\n        const authorityList = identityAuthorities && isJSON(identityAuthorities.authoritySettings) ? JSON.parse(identityAuthorities.authoritySettings) : [];\n        console.log(authorityList);\n        const reportList = authorityList.flatMap((authority) => (authority.pageTitle !== '設計師端權限設定'\n          ? []\n          : authority.pageAuthority));\n        const permissionReportList = reportList.filter((item) => item.authority);\n        resolve(permissionReportList);\n      });\n    },\n    async swtichAuthority(value) {\n      await this.SET_USER_CURRENT_MERCHANTID(value);\n      await this.getMe();\n      await this.getMerchantAuthorities();\n      const permissionReportList = await this.permissionReportList();\n      await this.SET_USER_AUTHORIZELIST(permissionReportList);\n    },\n  },\n  watch: {\n    selected(value) {\n      this.swtichAuthority(value);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n*{\n  // font-family: \"Font Awesome 6 Pro\";\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1343033c&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1343033c&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","merchentList","model","value","callback","$$v","selected","expression","_v","_s","userInfo","user","name","on","doLogout","_l","service","index","isAuthority","itemName","key","routeName","$event","doRoute","iconSrc","_e","shareLink","staticRenderFns","metaInfo","title","titleTemplate","data","servicesList","computed","mapState","mounted","methods","mapActions","url","window","navigator","text","then","catch","console","routName","init","Promise","firstUserMerchant","getMechants","id","res","errors","icon","showConfirmButton","showCancelButton","showClass","popup","hideClass","resp","timer","timerProgressBar","getMe","getMerchantAuthorities","permissionReportList","authority","resolve","swtichAuthority","watch","component"],"sourceRoot":""}