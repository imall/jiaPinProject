"use strict";(self["webpackChunkbos_designer"]=self["webpackChunkbos_designer"]||[]).push([[246],{5246:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]"},[r("C-Back-Nav",{attrs:{title:"互助日報表",routeTarget:{name:"Report"}}}),r("section",{staticClass:"relative z-0 mt-[52px] p-3"},[r("div",{staticClass:"flex items-center gap-2"},[r("p",[e._v("日期：")]),r("vc-date-picker",{attrs:{mode:"date","max-date":e.$dayjs().format("YYYY-MM-DD")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,s=t.inputEvents;return[r("input",e._g({staticClass:"rounded border px-2 py-1 focus:border-blue-300 focus:outline-none",domProps:{value:i}},s))]}}]),model:{value:e.searchDate,callback:function(t){e.searchDate=t},expression:"searchDate"}})],1),r("div",{staticClass:"text-left text-sm"},[r("div",{staticClass:"my-4 flex items-center justify-between"},[r("div",{staticClass:"flex items-baseline"},[r("p",{staticClass:"mr-1 text-[24px] font-bold"},[e._v(e._s(e.$dayjs(e.searchDateSubmited).format("MM"))+"月")]),r("p",[e._v(e._s(e.$dayjs(e.searchDateSubmited).format("DD"))+"日")])]),r("div",[r("p",[e._v("設計師 "+e._s(e.userInfo.user.name))])])]),e.reviewResult&&e.reviewResultWholeMonth?r("div",{staticClass:"break-words"},[e._m(0),e._l(e.reviewResult.helperRecord,(function(t,i){return r("div",{key:"helperRecordItem"+i,staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 p-1 "},[r("div",{staticClass:"w-1/12"},[e._v("#"+e._s(t.orderNo))]),r("div",{staticClass:"w-4/12"},[e._v(e._s(t.service.name))]),r("div",{staticClass:"w-3/12 text-right"},[e._v(e._s(t.designer.name))]),r("div",{staticClass:"w-2/12 text-right"},[e._v(e._s(-1*t.helperFee))]),r("div",{staticClass:"w-2/12 text-right"},[e._v(e._s(t.helperPoint))])])})),e._l(e.reviewResult.productRecord,(function(t,i){return r("div",{key:"productRecordItem"+i,staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 p-1 "},[r("div",{staticClass:"w-1/12"},[e._v("#"+e._s(t.orderNo))]),r("div",{staticClass:"w-4/12"},[e._v(" "+e._s(t.productName?t.productName+" + ":"")+" "+e._s(t.productUnitPrice?t.productUnitPrice+" x ":"")+" "+e._s(t.productCount)+" ")]),r("div",{staticClass:"w-3/12 text-right"}),r("div",{staticClass:"w-2/12 text-right"},[e._v(e._s(t.productUnitPrice*t.productCount))]),r("div",{staticClass:"w-2/12 text-right"})])})),r("div",{staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 p-1 "},[r("div",{staticClass:"w-2/12"},[e._v("合計")]),e.priceDisplayOnDailyReportDefault.isPriceDisplayOnDailyReport?r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-8/12 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.totalCount):e.totalCount))]):e._e(),r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-2/12 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.totalCountPoint):e.totalCountPoint))])])],2):e._e(),e.reviewResult&&e.reviewResultWholeMonth?r("div",{staticClass:"break-words"},[e._m(1),e.isDisplayHelperRetrieveInDailyReport&&0!==e.reviewResult.summaryNoPoint?r("div",{staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50"},[r("div",{staticClass:"w-2/5"},[e._v("互助獲得金額(不含點)")]),r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-2/5 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.reviewResult.summaryNoPoint):e.reviewResult.summaryNoPoint))]),r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-2/5 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.reviewResultWholeMonth.summaryNoPoint):e.reviewResultWholeMonth.summaryNoPoint))])]):e._e(),e.isDisplayHelperRetrieveInDailyReport&&0!==e.reviewResult.pointSummary?r("div",{staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50"},[r("div",{staticClass:"w-2/5"},[e._v("互助獲得(點)點數/換算金額")]),r("div",{staticClass:"w-2/5 text-right"},[r("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.reviewResult.pointSummary):e.reviewResult.pointSummary))]),e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[e._v(" / "),r("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(-1*e.reviewResultWholeMonth.summaryOnlyPoint):-1*e.reviewResultWholeMonth.summaryOnlyPoint))])]:e._e()],2),r("div",{staticClass:"w-1/5 text-right"},[r("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.reviewResult.pointSummary):e.reviewResult.pointSummary))]),e.priceDisplayOnDailyReportDefault.isHelperPointPriceDisplay?[e._v(" / "),r("span",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}]},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(-1*e.reviewResultWholeMonth.summaryOnlyPoint):-1*e.reviewResultWholeMonth.summaryOnlyPoint))])]:e._e()],2)]):e._e(),r("div",{staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50"},[r("div",{staticClass:"w-2/5"},[e._v("店販業績")]),r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-2/5 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?e.tst(e.reviewResult.productPerformanceSummary):e.reviewResult.productPerformanceSummary))]),r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-1/5 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.reviewResultWholeMonth.productPerformanceSummary):e.reviewResultWholeMonth.productPerformanceSummary))])]),r("div",{staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50"},[r("div",{staticClass:"w-2/5"},[e._v("店販抽成")]),r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-2/5 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.reviewResult.productRakeSummary):e.reviewResult.productRakeSummary))]),r("div",{directives:[{name:"to-fixed",rawName:"v-to-fixed"}],staticClass:"w-1/5 text-right"},[e._v(e._s(e.isUsingMathRoundInDesignerDailyReport?Math.round(e.reviewResultWholeMonth.productRakeSummary):e.reviewResultWholeMonth.productRakeSummary))])])]):e._e()])])],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 bg-[#08424c]/80 p-1 text-white "},[r("div",{staticClass:"w-1/12"},[e._v("#")]),r("div",{staticClass:"w-4/12"},[e._v("項目")]),r("div",{staticClass:"w-3/12 text-right"},[e._v("設計師")]),r("div",{staticClass:"w-2/12 text-right"},[e._v("金額")]),r("div",{staticClass:"w-2/12 text-right"},[e._v("點")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mb-1 flex cursor-pointer items-center justify-between border-b border-solid border-primary/50 bg-[#08424c]/80 p-1 text-white "},[r("div",{staticClass:"w-2/5"}),r("div",{staticClass:"w-2/5 text-right"},[e._v("日合計")]),r("div",{staticClass:"w-1/5 text-right"},[e._v("累計")])])}],a=r(4648),n=r(6835),o=r(8534),u=(r(1539),r(8783),r(3948),r(8862),r(1249),r(629)),l={name:"priceList-index",description:"報表的薪資表",metaInfo:{title:"名留",titleTemplate:"%s | 薪資表"},data:function(){return{searchDate:this.$dayjs().valueOf(),searchDateSubmited:this.$dayjs().valueOf(),reviewResult:null,reviewResultWholeMonth:null,isDisplayHelperRetrieveInDailyReport:!1,isUsingMathRoundInDesignerDailyReport:!1,isZeroValueHiddenOnDailyReport:!1,priceDisplayOnDailyReportDefault:{},isRefresh:!0}},mounted:function(){this.init()},methods:{tst:function(e){return console.log(e),Math.round(e)},init:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.getIsDisplayHelperRetrieveInDailyReport(),e.getIsUsingMathRoundInDesignerDailyReport(),e.getIsZeroValueHiddenOnDailyReport(),e.getPriceDisplayOnDailyReportDefault()]).then((function(){}));case 2:return t.next=4,e.getUserHelperRetrieve();case 4:return t.next=6,e.getUserHelperRetrieveWholeMonth();case 6:case"end":return t.stop()}}),t)})))()},getIsDisplayHelperRetrieveInDailyReport:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){var r,i,s,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getIsDisplayHelperRetrieveInDailyReport();case 2:if(r=t.sent,i=r.data,s=i.data,a=i.errors,!a){t.next=6;break}return t.abrupt("return");case 6:e.isDisplayHelperRetrieveInDailyReport=s.getIsDisplayHelperRetrieveInDailyReport;case 7:case"end":return t.stop()}}),t)})))()},getIsUsingMathRoundInDesignerDailyReport:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){var r,i,s,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getIsUsingMathRoundInDesignerDailyReport();case 2:if(r=t.sent,i=r.data,s=i.data,a=i.errors,!a){t.next=6;break}return t.abrupt("return");case 6:e.isUsingMathRoundInDesignerDailyReport=s.getIsUsingMathRoundInDesignerDailyReport;case 7:case"end":return t.stop()}}),t)})))()},getIsZeroValueHiddenOnDailyReport:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){var r,i,s,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getIsZeroValueHiddenOnDailyReport();case 2:if(r=t.sent,i=r.data,s=i.data,a=i.errors,!a){t.next=6;break}return t.abrupt("return");case 6:e.isZeroValueHiddenOnDailyReport=s.getIsZeroValueHiddenOnDailyReport;case 7:case"end":return t.stop()}}),t)})))()},getPriceDisplayOnDailyReportDefault:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){var r,i,s,a;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getPriceDisplayOnDailyReportDefault();case 2:if(r=t.sent,i=r.data,s=i.data,a=i.errors,!a){t.next=6;break}return t.abrupt("return");case 6:e.priceDisplayOnDailyReportDefault=s.getPriceDisplayOnDailyReportDefault;case 7:case"end":return t.stop()}}),t)})))()},doRoute:function(){this.$router.push({name:"Punch"})},getUserHelperRetrieve:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){var r,i,s,a,o;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.reviewResult=null,e.searchDateSubmited=e.searchDate,r={designerId:e.userInfo.user.id,startDate:e.$dayjs(e.$dayjs(e.searchDate).format("YYYY-MM-DD 00:00:00")).valueOf(),endDate:e.$dayjs(e.$dayjs(e.searchDate).format("YYYY-MM-DD 23:59:59")).valueOf()},t.next=5,e.$api.getUserHelperRetrieve(r);case 5:if(i=t.sent,s=JSON.parse(JSON.stringify(i.data)),a=s.data,o=s.errors,!o){t.next=9;break}return t.abrupt("return");case 9:e.reviewResult=a.getUserHelperRetrieve;case 10:case"end":return t.stop()}}),t)})))()},getUserHelperRetrieveWholeMonth:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function t(){var r,i,s,a,o;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.reviewResultWholeMonth=null,e.searchDateSubmited=e.searchDate,r={designerId:e.userInfo.user.id,startDate:e.$dayjs(e.$dayjs(e.$dayjs(e.searchDate).startOf("month")).format("YYYY-MM-DD 00:00:00")).valueOf(),endDate:e.$dayjs(e.$dayjs(e.$dayjs(e.searchDate).endOf("month")).format("YYYY-MM-DD 23:59:59")).valueOf()},t.next=5,e.$api.getUserHelperRetrieve(r);case 5:if(i=t.sent,s=JSON.parse(JSON.stringify(i.data)),a=s.data,o=s.errors,!o){t.next=9;break}return t.abrupt("return");case 9:e.reviewResultWholeMonth=a.getUserHelperRetrieve;case 10:case"end":return t.stop()}}),t)})))()},reducerCounter:function(e){return e.reduce((function(e,t){return+e+ +t}))}},watch:{searchDate:function(){this.searchDate&&(this.getUserHelperRetrieve(),this.getUserHelperRetrieveWholeMonth())}},computed:(0,a.Z)((0,a.Z)({},(0,u.rn)("userInfo",["userInfo"])),{},{totalCountPoint:function(){var e=0;if(Array.isArray(this.reviewResult.helperRecord)&&this.reviewResult.helperRecord.length>0){var t=this.reviewResult.helperRecord.map((function(e){return e.helperPoint}));e=this.reducerCounter(t)}return e},totalCount:function(){return this.totalCountHelperRecord+this.totalCountLProductRecord},totalCountHelperRecord:function(){var e=0;if(Array.isArray(this.reviewResult.helperRecord)&&this.reviewResult.helperRecord.length>0){var t=this.reviewResult.helperRecord.map((function(e){return e.helperFee}));e=this.reducerCounter(t)}return e},totalCountLProductRecord:function(){var e=0;if(Array.isArray(this.reviewResult.productRecord)&&this.reviewResult.productRecord.length>0){var t=this.reviewResult.productRecord.map((function(e){return e.productUnitPrice*e.productCount}));e=this.reducerCounter(t)}return e}})},d=l,c=r(3736),p=(0,c.Z)(d,i,s,!1,null,null,null),v=p.exports}}]);
//# sourceMappingURL=246-legacy.efc9eba2.js.map