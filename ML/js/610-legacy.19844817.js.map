{"version":3,"file":"js/610-legacy.19844817.js","mappings":"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","sources":["webpack://bos-designer/./src/views/Home/punch/index.vue?afa0","webpack://bos-designer/src/views/Home/punch/index.vue","webpack://bos-designer/./src/views/Home/punch/index.vue?015c","webpack://bos-designer/./src/views/Home/punch/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\"},[_c('C-Back-Nav',{attrs:{\"title\":((_vm.currentMerchantName !== '' ? _vm.currentMerchantName + ' - ' : '') + \"打卡\")}}),_c('section',{staticClass:\"relative z-0 mt-[52px] p-3\"},[_c('div',{staticClass:\"mb-4 text-right\"},[_c('div',{staticClass:\"inline-block w-fit cursor-pointer rounded-[10px] bg-primary px-2 py-1 text-white\",on:{\"click\":_vm.doRoute,\"keypress\":_vm.doRoute}},[_c('span',{staticClass:\"mr-[6px]\"},[_vm._v(\"打卡清單\")]),_c('font-awesome-icon',{attrs:{\"icon\":\"fa-regular fa-list\"}})],1)]),_c('div',{staticClass:\" mb-3 text-7xl text-primary\"},[_vm._v(\" \"+_vm._s(_vm._f(\"dateFmtHm\")(_vm.currentTime))+\" \")]),_c('div',{staticClass:\" text-sm font-medium text-primary\"},[_vm._v(\" \"+_vm._s(_vm._f(\"dateFmtROCMMDD\")(_vm.currentTime))+\" \"+_vm._s(_vm._f(\"dateFmtdd\")(_vm.currentTime))+\" \")]),_c('div',{staticClass:\"flex items-center justify-center gap-2\"},[_c('p',{staticClass:\"whitespace-nowrap font-bold\"},[_vm._v(\"位置狀態: \")]),_c('p',{class:[{ 'text-orange-500': _vm.locationInfo === '距離介於25公尺以及50公尺'},{ 'text-red-600': _vm.locationInfo === '距離大於50公尺' || _vm.locationInfo === '無GPS座標'}]},[_vm._v(_vm._s(_vm.locationInfo))]),_c('font-awesome-icon',{staticClass:\" cursor-pointer text-primary\",attrs:{\"icon\":\"fa-regular fa-arrows-rotate\"},on:{\"click\":_vm.reFreshLocation}})],1),_c('div',{staticClass:\"my-7 flex gap-2\"},[_c('div',{staticClass:\"w-full cursor-pointer bg-second p-4 text-white\",on:{\"click\":function($event){return _vm.doAttendance('CLOCKIN')},\"keypress\":function($event){return _vm.doAttendance('CLOCKIN')}}},[_vm._v(\"上班打卡\")]),_c('div',{staticClass:\"w-full cursor-pointer bg-second p-4 text-white\",on:{\"click\":function($event){return _vm.doAttendance('CLOCKOUT')},\"keypress\":function($event){return _vm.doAttendance('CLOCKOUT')}}},[_vm._v(\"下班打卡\")])]),(_vm.clockInRecordInList && _vm.isHasNotClockout)?_c('div',{staticClass:\"mb-7 flex gap-2\"},[_c('div',{staticClass:\"w-full cursor-pointer bg-second/80 p-4 text-white\",on:{\"click\":function($event){_vm.doOutPunch(true),_vm.doAttendance('BREAKSTART')},\"keypress\":function($event){_vm.doOutPunch(true),_vm.doAttendance('BREAKSTART')}}},[_vm._v(\"外出打卡\")]),_c('div',{staticClass:\"w-full cursor-pointer bg-second/80  p-4 text-white\",on:{\"click\":function($event){_vm.doOutPunch(false),_vm.doAttendance('BREAKEND')},\"keypress\":function($event){_vm.doOutPunch(false),_vm.doAttendance('BREAKEND')}}},[_vm._v(\"歸來打卡\")])]):_vm._e(),(_vm.isDailyClockInRecordHasClockInRecord)?_vm._l((_vm.dailyClockInRecord.clockInRecord),function(recordItem,index){return _c('div',{key:index,staticClass:\"text-left\",class:{'mb-4': _vm.isDailyClockInRecordHasClockInRecord}},[_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\" mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"上班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(_vm._s(recordItem.in ? _vm.timstampToMinSec(recordItem.in['time']) : '尚未打卡'))])]),(recordItem.in)?_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\" mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"外出時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\" \"+_vm._s(_vm.timstampListToMinSecConcatText( recordItem.breakRecord,'start') === '' ? '未有打卡紀錄' : _vm.timstampListToMinSecConcatText( recordItem.breakRecord,'start'))+\" \")])]):_vm._e(),(recordItem.in)?_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\" mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"歸來時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\" \"+_vm._s(_vm.timstampListToMinSecConcatText( recordItem.breakRecord,'end') === ''? '未有打卡紀錄' : _vm.timstampListToMinSecConcatText( recordItem.breakRecord,'end'))+\" \")])]):_vm._e(),_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\" mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"下班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(_vm._s(recordItem.out ? _vm.timstampToMinSec(recordItem.out['time']) : '尚未打卡'))])])])}):[_vm._m(0)],_c('hr',{staticClass:\"my-7 border bg-primary\"}),_c('div',{staticClass:\"text-left text-sm font-medium\"},[_c('div',{staticClass:\"flex items-baseline\"},[_c('p',{staticClass:\"min-w-[102px]\"},[_vm._v(\"本月總打卡天數:\")]),_c('p',{staticClass:\"mx-2 font-sans text-3xl\"},[_vm._v(_vm._s(_vm.monthlyAttendanceCount)),_c('span',{staticClass:\"ml-1 text-sm\"},[_vm._v(\"天\")])])]),_c('div',{staticClass:\"flex items-baseline\"},[_c('p',{staticClass:\"min-w-[102px]\"},[_vm._v(\"遲到總分鐘數: \")]),_c('p',{staticClass:\"mx-2 font-sans text-3xl text-rejectText\"},[_vm._v(_vm._s(_vm.monthlyAttendanceLateCount)),_c('small',{staticClass:\"ml-1 text-sm text-rejectText\"},[_vm._v(\"分鐘\")])])])])],2)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-left\"},[_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\" mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"上班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\"尚未打卡\")])]),_c('p',{staticClass:\"flex break-all\"},[_c('span',{staticClass:\" mr-2 whitespace-nowrap font-bold\"},[_vm._v(\"下班時間:\")]),_c('span',{staticClass:\"inline-block w-full underline decoration-black/20\"},[_vm._v(\"尚未打卡\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <main class=\"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]\">\n    <C-Back-Nav :title=\"`${currentMerchantName !== '' ? currentMerchantName + ' - ' : ''}打卡`\"></C-Back-Nav>\n    <section class=\"relative z-0 mt-[52px] p-3\">\n      <div class=\"mb-4 text-right\">\n        <div class=\"inline-block w-fit cursor-pointer rounded-[10px] bg-primary px-2 py-1 text-white\" @click=\"doRoute\" @keypress=\"doRoute\">\n          <span class=\"mr-[6px]\">打卡清單</span>\n          <font-awesome-icon icon=\"fa-regular fa-list\" />\n        </div>\n      </div>\n\n      <div class=\" mb-3 text-7xl text-primary\">\n        {{currentTime | dateFmtHm}}\n      </div>\n      <div class=\" text-sm font-medium text-primary\">\n        {{currentTime | dateFmtROCMMDD}} {{currentTime | dateFmtdd}}\n      </div>\n      <div class=\"flex items-center justify-center gap-2\">\n        <p class=\"whitespace-nowrap font-bold\">位置狀態: </p>\n        <p :class=\"[{ 'text-orange-500': locationInfo === '距離介於25公尺以及50公尺'},{ 'text-red-600': locationInfo === '距離大於50公尺' || locationInfo === '無GPS座標'}]\">{{locationInfo}}</p>\n        <font-awesome-icon icon=\"fa-regular fa-arrows-rotate\" @click=\"reFreshLocation\" class=\" cursor-pointer text-primary\"/>\n      </div>\n\n      <div class=\"my-7 flex gap-2\">\n        <div class=\"w-full cursor-pointer bg-second p-4 text-white\" @click=\"doAttendance('CLOCKIN')\" @keypress=\"doAttendance('CLOCKIN')\">上班打卡</div>\n        <div class=\"w-full cursor-pointer bg-second p-4 text-white\" @click=\"doAttendance('CLOCKOUT')\" @keypress=\"doAttendance('CLOCKOUT')\">下班打卡</div>\n      </div>\n      <div class=\"mb-7 flex gap-2\" v-if=\"clockInRecordInList && isHasNotClockout\">\n        <div class=\"w-full cursor-pointer bg-second/80 p-4 text-white\" @click=\"doOutPunch(true),doAttendance('BREAKSTART')\" @keypress=\"doOutPunch(true),doAttendance('BREAKSTART')\">外出打卡</div>\n        <div class=\"w-full cursor-pointer bg-second/80  p-4 text-white\" @click=\"doOutPunch(false),doAttendance('BREAKEND')\" @keypress=\"doOutPunch(false),doAttendance('BREAKEND')\">歸來打卡</div>\n      </div>\n\n      <template v-if=\"isDailyClockInRecordHasClockInRecord\">\n        <div class=\"text-left\" v-for=\"(recordItem,index) in dailyClockInRecord.clockInRecord\" :key=\"index\" :class=\"{'mb-4': isDailyClockInRecordHasClockInRecord}\">\n        <p class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">上班時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">{{recordItem.in ?  timstampToMinSec(recordItem.in['time']) : '尚未打卡'}}</span>\n        </p>\n        <p v-if=\"recordItem.in\" class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">外出時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">\n            {{timstampListToMinSecConcatText( recordItem.breakRecord,'start') === '' ? '未有打卡紀錄' : timstampListToMinSecConcatText( recordItem.breakRecord,'start')}}\n          </span>\n        </p>\n        <p v-if=\"recordItem.in\" class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">歸來時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">\n            {{timstampListToMinSecConcatText( recordItem.breakRecord,'end') === ''? '未有打卡紀錄' : timstampListToMinSecConcatText( recordItem.breakRecord,'end')}}\n          </span>\n        </p>\n        <p class=\"flex break-all\">\n          <span class=\" mr-2 whitespace-nowrap font-bold\">下班時間:</span>\n          <span class=\"inline-block w-full underline decoration-black/20\">{{recordItem.out ? timstampToMinSec(recordItem.out['time']) : '尚未打卡'}}</span>\n        </p>\n      </div>\n      </template>\n      <template v-else>\n        <div class=\"text-left\">\n          <p class=\"flex break-all\">\n            <span class=\" mr-2 whitespace-nowrap font-bold\">上班時間:</span>\n            <span class=\"inline-block w-full underline decoration-black/20\">尚未打卡</span>\n          </p>\n          <p class=\"flex break-all\">\n            <span class=\" mr-2 whitespace-nowrap font-bold\">下班時間:</span>\n            <span class=\"inline-block w-full underline decoration-black/20\">尚未打卡</span>\n          </p>\n        </div>\n      </template>\n\n      <hr class=\"my-7 border bg-primary\" />\n\n      <div class=\"text-left text-sm font-medium\">\n        <div class=\"flex items-baseline\">\n          <p class=\"min-w-[102px]\">本月總打卡天數:</p>\n          <p class=\"mx-2 font-sans text-3xl\">{{monthlyAttendanceCount}}<span class=\"ml-1 text-sm\">天</span></p>\n        </div>\n\n        <div class=\"flex items-baseline\">\n          <p class=\"min-w-[102px]\">遲到總分鐘數: </p>\n          <p class=\"mx-2 font-sans text-3xl text-rejectText\">{{monthlyAttendanceLateCount}}<small class=\"ml-1 text-sm text-rejectText\">分鐘</small></p>\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nexport default {\n  name: 'punch-index',\n  description: '打卡的首頁',\n  metaInfo: {\n    title: '名留',\n    titleTemplate: '%s | 打卡',\n  },\n  data() {\n    return {\n      resultItem: {},\n      resultAttendance: {},\n      punchStart: '',\n      punchEnd: '',\n      outPunchStart: '',\n      outPunchEnd: '',\n      locationInfo: '',\n      // 時間\n      currentTimeIntervalKey: '',\n      currentTime: this.$dayjs().format('YYYY-MM-DD HH:mm:ss'),\n      dailyClockInRecord: {},\n    };\n  },\n  mounted() {\n    this.currentTimeIntervalKey = setInterval(() => {\n      this.currentTime = this.$dayjs().format('YYYY-MM-DD HH:mm:ss');\n    }, 1000);\n    this.init();\n  },\n  methods: {\n    async init() {\n      await Promise.all([this.getAttendanceRecords(), this.getDailyClockInRecord(), this.reFreshLocation()]).then(() => {});\n    },\n    async reFreshLocation() {\n      const { latitude, longitude } = await this.geoFindMe();\n      const resp = await this.$api.checkGPSStatus({ latitude: latitude ? `${latitude}` : latitude, longitude: longitude ? `${longitude}` : longitude });\n      const { data, errors } = resp.data;\n      if (errors) return;\n      const actions = new Map([\n        ['NULL', { locationInfo: '無GPS座標' }],\n        ['LOWERTHAN25', { locationInfo: '距離小於25公尺' }],\n        ['BETWEEN25AND50', { locationInfo: '距離介於25公尺以及50公尺' }],\n        ['MORETHAN50', { locationInfo: '距離大於50公尺' }],\n      ]);\n      this.locationInfo = actions.get(data.checkGPSStatus.status) ? actions.get(data.checkGPSStatus.status).locationInfo : '無GPS座標';\n    },\n    async getDailyClockInRecord() {\n      const resp = await this.$api.dailyClockInRecord({ date: this.$dayjs().valueOf(), designerId: this.userInfo.user.id });\n      const { data, errors } = resp.data;\n      if (errors) return;\n      const [dailyClockInRecord = {}] = data.dailyClockInRecord;\n      this.dailyClockInRecord = dailyClockInRecord;\n    },\n    async getAttendanceRecords() {\n      const sumbitAttendanceRecordsForm = {\n        userId: this.userInfo.user.id,\n        dateRange: {\n          startDate: this.$dayjs(new Date()).startOf('month').valueOf(),\n          endDate: this.$dayjs(new Date()).endOf('month').valueOf(),\n        },\n        pageLimit: 1000,\n      };\n      const resp = await this.$api.attendanceRecords(sumbitAttendanceRecordsForm);\n      const { data, errors } = resp.data;\n      if (errors) return;\n      this.resultAttendance = data.attendanceRecords;\n    },\n    doRoute() {\n      this.$router.push({ name: 'Punch-list' });\n    },\n    geoFindMe() {\n      return new Promise((resolve) => {\n        let { latitude, longitude } = {};\n        const success = (position) => {\n          latitude = position.coords.latitude;\n          longitude = position.coords.longitude;\n          resolve({ latitude, longitude });\n        };\n        const error = () => {\n          latitude = null;\n          longitude = null;\n          resolve({ latitude, longitude });\n        };\n        if (!navigator.geolocation) {\n          this.$swal.fire({\n            icon: 'warning',\n            title: '請開起與授權GPS定位功能',\n            showConfirmButton: true,\n            showCancelButton: true,\n          });\n          resolve({ latitude: null, longitude: null });\n        } else {\n          navigator.geolocation.getCurrentPosition(success, error);\n        }\n      });\n    },\n    async doAttendance(statusType) {\n      await this.reFreshLocation();\n      const { latitude, longitude } = await this.geoFindMe();\n      const resp = await this.$api.userClockIn({\n        userIds: [this.userInfo.user.id], status: statusType, checkinType: 'CELLPHONE', GPSLocation: latitude ? { latitude: `${latitude}`, longitude: `${longitude}` } : null,\n      });\n      const { data, errors } = resp.data;\n      await this.getAttendanceRecords();\n      if (errors) return;\n      await this.getDailyClockInRecord();\n      if (data.userClockIn) {\n        this.$swal.fire({\n          showCloseButton: true,\n          html:\n            `<div class=\"flex items-center justify-center my-10\">\n              <img src=\"/designer/assets/images/success.svg\" alt=\"\" class=\"inline-block mr-1\" /><span>打卡成功</span>\n            </div>`,\n          showConfirmButton: false,\n          timer: 3000,\n          timerProgressBar: true,\n        });\n      }\n    },\n    doOutPunch(status) {\n      if (status) {\n        this.outPunchStart = this.$dayjs().format('HH:mm');\n      } else {\n        this.outPunchEnd = this.$dayjs().format('HH:mm');\n      }\n    },\n  },\n  computed: {\n    ...mapState('userInfo', ['userInfo', 'currentMechantId']),\n    monthlyAttendanceCount() {\n      let count = 0;\n      if (this.resultAttendance[0] && Array.isArray(this.resultAttendance[0].attendanceRecord)) {\n        count = this.resultAttendance[0].attendanceRecord.filter((recordItem) => Object.prototype.hasOwnProperty.call(recordItem, 'clockInRecord') && Array.isArray(recordItem.clockInRecord) && recordItem.clockInRecord.length > 0).length;\n      }\n      return count;\n    },\n    monthlyAttendanceLateCount() {\n      let count = 0;\n      count = this.resultAttendance[0] ? this.resultAttendance[0].totalLateMinutes : 0;\n      return count;\n    },\n    currentMerchantName() {\n      const currentMerchant = this.userInfo?.user?.merchants.find((item) => item.id === this.currentMechantId);\n      return currentMerchant ? currentMerchant.name : '';\n    },\n    clockInRecordInList() {\n      let clockInRecordInListContent = '';\n      const { clockInRecord = [] } = this.dailyClockInRecord;\n      clockInRecordInListContent = clockInRecord.flatMap((RecordItem) => (RecordItem.in ? this.$dayjs(RecordItem.in).format('HH:mm') : '')).toString();\n      return clockInRecordInListContent;\n    },\n    timstampToMinSec() {\n      return (timestamp) => (this.$dayjs(timestamp).isValid() ? this.$dayjs(timestamp).format('HH:mm') : timestamp);\n    },\n    timstampListToMinSecConcatText() {\n      return (timstampList, type) => timstampList.flatMap((timstampListItem) => [timstampListItem[type] && this.$dayjs(timstampListItem[type].time).isValid() ? this.$dayjs(timstampListItem[type].time).format('HH:mm') : []]).toString();\n    },\n    isHasNotClockout() {\n      let isHasNotClockout = false;\n      const { clockInRecord = [] } = this.dailyClockInRecord;\n      isHasNotClockout = clockInRecord.some((clockInRecordItem) => clockInRecordItem && clockInRecordItem.out === null);\n      return isHasNotClockout;\n    },\n    isDailyClockInRecordHasClockInRecord() {\n      return this.dailyClockInRecord.clockInRecord && this.dailyClockInRecord.clockInRecord.length > 0;\n    },\n  },\n  beforeDestroy() {\n    clearInterval(this.currentTimeIntervalKey);\n  },\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4bda786c&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","currentMerchantName","on","doRoute","_v","_s","_f","currentTime","class","locationInfo","reFreshLocation","$event","doAttendance","clockInRecordInList","isHasNotClockout","doOutPunch","_e","_l","dailyClockInRecord","recordItem","index","key","isDailyClockInRecordHasClockInRecord","in","timstampToMinSec","timstampListToMinSecConcatText","breakRecord","out","_m","monthlyAttendanceCount","monthlyAttendanceLateCount","staticRenderFns","name","description","metaInfo","title","titleTemplate","data","resultItem","resultAttendance","punchStart","punchEnd","outPunchStart","outPunchEnd","currentTimeIntervalKey","mounted","methods","init","Promise","latitude","longitude","resp","errors","actions","getDailyClockInRecord","date","designerId","getAttendanceRecords","sumbitAttendanceRecordsForm","userId","dateRange","startDate","endDate","pageLimit","geoFindMe","resolve","navigator","icon","showConfirmButton","showCancelButton","statusType","userIds","status","checkinType","GPSLocation","showCloseButton","html","timer","timerProgressBar","computed","mapState","count","clockInRecordInListContent","beforeDestroy","clearInterval","component"],"sourceRoot":""}