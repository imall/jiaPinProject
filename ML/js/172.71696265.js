"use strict";(self["webpackChunkbos_designer"]=self["webpackChunkbos_designer"]||[]).push([[172],{7172:function(t,e,s){s.r(e),s.d(e,{default:function(){return N}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]"},[s("C-Back-Nav",{attrs:{title:"客戶資料查詢",routeTarget:{name:"Customer"}}}),s("section",{staticClass:"relative z-0 mt-[52px] p-3"},[s("ul",{staticClass:"scrollnone nav nav-tabs mb-4 flex list-none overflow-x-auto border-b border-solid border-primary pl-0"},[s("li",{class:["UserInfo"===t.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(e){t.seletedTab="UserInfo"},keypress:function(e){t.seletedTab="UserInfo"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[t._v("個人資料")])]),s("li",{class:["Consumption"===t.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(e){t.seletedTab="Consumption"},keypress:function(e){t.seletedTab="Consumption"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[t._v("服務紀錄")])]),s("li",{class:["Income"===t.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(e){t.seletedTab="Income"},keypress:function(e){t.seletedTab="Income"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[t._v("入金紀錄")])]),s("li",{class:["Coupon"===t.seletedTab?"border-b-2 border-solid border-primary":""],on:{click:function(e){t.seletedTab="Coupon"},keypress:function(e){t.seletedTab="Coupon"}}},[s("p",{staticClass:"whitespace-nowrap px-6 py-3 text-xs"},[t._v("卡券紀錄")])])]),s("keep-alive",[s(t.seletedTab,{tag:"component"})],1)],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[t.resultData?s("div",{staticClass:"px-2"},[s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("姓名")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.name||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("電話")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.cellphone||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("市話")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.cellphone||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("客戶暱稱")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.nickName||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("性別")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.gender||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("Email")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.email||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("Line ID")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.lineId||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("生日")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.birthday.year&&"0"!==t.resultData.birthday.year?t.resultData.birthday.year+"/":"")+t._s(t.resultData.birthday.month&&"0"!==t.resultData.birthday.month?t.resultData.birthday.month+"/":"--.")+t._s(t.resultData.birthday.day&&"0"!==t.resultData.birthday.day?t.resultData.birthday.day:"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("地址")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.address||"--"))])]),s("div",{staticClass:"mt-2 flex border-b border-solid border-primary/50 text-left"},[s("div",{staticClass:"w-1/4"},[t._v("客戶來源")]),s("div",{staticClass:"w-3/4"},[t._v(t._s(t.resultData.source||"--"))])])]):t._e()])},o=[],l={name:"customer-component-userInfo",data(){return{resultData:null}},mounted(){this.getCustomer()},methods:{async getCustomer(){const t=await this.$api.customer({id:this.$route.query.id}),{data:e,errors:s}=t.data;s||(this.resultData=e.customer)}}},d=l,n=s(3736),c=(0,n.Z)(d,r,o,!1,null,null,null),u=c.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[t.reviewResult.orders&&0===t.reviewResult.orders.length?s("p",{staticClass:"mt-10 text-sm text-stone-500"},[t._v("此客戶尚無服務紀錄")]):t._e(),t.reviewResult.orders&&t.reviewResult.orders.length>0?s("h2",{staticClass:"mt-5 mb-3 text-xl font-bold"},[t._v("訂單列表")]):t._e(),t.reviewResult.orders&&t.reviewResult.orders.length>0?s("ul",{staticClass:"grid gap-4"},t._l(t.reviewResult.orders,(function(e){return s("li",{key:e.id,staticClass:"w-full bg-[#08424c] p-2 text-white"},[s("p",{staticClass:"mb-2 text-xl font-bold"},[t._v("訂單編號 "+t._s(e.no))]),s("div",{staticClass:"grid grid-cols-12 gap-2"},[s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("服務消費")]),s("p",[t._v("$"+t._s(e.serviceFakeTotal))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("店販消費")]),s("p",[t._v("$"+t._s(e.productFakeTotal))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("卡券使用(入業績)")]),s("p",[t._v("$"+t._s(e.useTicketTotal))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("卡券販賣(入業績)")]),s("p",[t._v("$"+t._s(e.ticketSellIntoPerformance))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("業績收入")]),s("p",[t._v("$"+t._s(e.performanceIncome))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("卡券販賣(不入業績)")]),s("p",[t._v("$"+t._s(e.ticketSellNotIntoPerformance))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("卡券使用(-)")]),s("p",[t._v("$"+t._s(e.usedTicketForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("第三方卡券(-)")]),s("p",[t._v("$"+t._s(e.thirdPartTicketForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("其他付款方式(-)")]),s("p",[t._v("$"+t._s(e.otherPayWayForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between border-b border-b-white"},[s("p",[t._v("入金使用(-)")]),s("p",[t._v("$"+t._s(e.walletUsedForDecount))])]),s("div",{staticClass:"col-span-12 flex justify-between"},[s("p",[t._v("營業現金應收")]),s("p",[t._v("$"+t._s(e.businessCash))])])]),s("ul",{staticClass:"my-2"},[s("li",{staticClass:"flex items-center justify-between bg-black/20 py-3 px-2",on:{click:function(t){e.isOpen=!e.isOpen},keypress:function(t){e.isOpen=!e.isOpen}}},[s("p",{staticClass:"text-lg"},[t._v("詳細資料")]),s("font-awesome-icon",{staticClass:"cursor-pointer text-lg duration-300",class:{"rotate-180":e.isOpen},attrs:{icon:"fa-regular fa-angle-up"}})],1),s("ul",{staticClass:"overflow-hidden bg-black/20 px-2 duration-300",class:{"max-h-[200vh]":e.isOpen,"max-h-[0px]":!e.isOpen}},[s("li",[s("table",{staticClass:"w-full"},[t._m(0,!0),s("tbody",t._l(e.staticDetail,(function(a,i){return s("tr",{key:i,class:{"border-b border-b-white py-1.5":i!==e.staticDetail.length-1}},[s("td",{staticClass:"p-1.5"},[t._v(t._s(a.designerName))]),s("td",{staticClass:"p-1.5"},[t._v(t._s(a.itemName))]),s("td",{staticClass:"p-1.5"},[t._v("$"+t._s(a.price))]),s("td",{staticClass:"p-1.5"},t._l(a.helperList,(function(e,a){return s("p",{key:a},[t._v(" "+t._s(e.helperName)+" ")])})),0)])})),0)])])])])])})),0):t._e()])},p=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("設計師")]),s("th",[t._v("項目")]),s("th",[t._v("價格")]),s("th",[t._v("互助人")])])])}],v={name:"customer-component-consumption",mounted(){this.getOrders()},deactivated(){window.removeEventListener("scroll",this.scrollGetOrders)},activated(){this.isEnd||window.addEventListener("scroll",this.scrollGetOrders)},data(){return{resultList:[],reviewResult:{},submitForm:{pageLimit:10,pageOffset:0},totalPage:0,isEnd:!1,isGetting:!1}},methods:{async getOrders(){const t={customerId:this.$route.query.id?this.$route.query.id:"",pageLimit:this.submitForm.pageLimit,pageOffset:this.submitForm.pageOffset},e=await this.$api.designerOrders(t),{data:s}=e.data;s.orders.orders.length>0?s.orders.orders.forEach(((t,e)=>{t["isOpen"]=!1,e===s.orders.orders.length-1&&(this.reviewResult=s.orders)})):this.reviewResult=s.orders,this.totalPage=Math.ceil(s.orders.totalCount/10)-1,this.isEnd=1===Math.ceil(s.orders.totalCount/10),this.submitForm.pageOffset<this.totalPage&&window.addEventListener("scroll",this.scrollGetOrders)},async scrollGetOrders(){const t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,s=document.documentElement.scrollHeight||document.body.scrollHeight;if(!this.isEnd&&!this.isGetting&&t+e>=s-50){this.isGetting=!0,this.submitForm.pageOffset+=1,this.submitForm.pageOffset>=this.totalPage&&(this.isEnd=!0,window.removeEventListener("scroll",this.scrollGetOrders));const t={customerId:this.$route.query.id?this.$route.query.id:"",pageLimit:10,pageOffset:this.submitForm.pageOffset},e=await this.$api.designerOrders(t),{data:s}=e.data;this.isGetting=!1,s.orders.orders.length>0&&s.orders.orders.forEach(((t,e)=>{t["isOpen"]=!1,e===s.orders.orders.length-1&&(this.reviewResult.orders=this.reviewResult.orders.concat(s.orders.orders))}))}}}},h=v,b=(0,n.Z)(h,m,p,!1,null,null,null),f=b.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[s("p",{staticClass:"before:contents-[''] relative my-3 pl-2 text-left before:absolute before:inset-0 before:h-full before:w-1 before:bg-primary"},[t._v("入金餘額")]),s("div",{staticClass:"mt-3 flex items-baseline text-second"},[s("p",{staticClass:"mr-2 pl-2"},[t._v("NT$")]),s("p",{staticClass:"text-[28px]"},[t._v(t._s(t.walletCash))])]),s("div",{staticClass:"my-4 flex gap-2 text-primary"},[s("div",{staticClass:"w-1/2 rounded-xl border border-solid border-primary p-1 duration-500",class:[1===t.seletedTab?"bg-primary text-white":""],on:{click:function(e){t.seletedTab=1,t.switchAddEventListener()},keypress:function(e){t.seletedTab=1}}},[t._v("入金紀錄")]),s("div",{staticClass:"w-1/2 rounded-xl border border-solid border-primary p-1 duration-500",class:[2===t.seletedTab?"bg-primary text-white":""],on:{click:function(e){t.seletedTab=2,t.switchAddEventListener()},keypress:function(e){t.seletedTab=2}}},[t._v("入金使用")])]),0===t.resultList.length&&1===t.seletedTab?s("p",{staticClass:"mt-20 text-sm text-stone-500"},[t._v("此客戶尚無入金紀錄")]):t._e(),0===t.resultUseList.length&&2===t.seletedTab?s("p",{staticClass:"mt-20 text-sm text-stone-500"},[t._v("此客戶尚無入金使用紀錄")]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.seletedTab,expression:"seletedTab === 1"}],staticClass:"animate__animated animate__fadeIn animate__slow"},t._l(t.resultList,(function(e,a){return s("div",{key:"consumption1"+a,staticClass:"border-b border-solid border-primary/50 px-2 pb-4",class:{hidden:0===t.resultList.length}},[s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("日期")]),s("div",{staticClass:"w-3/5"},[t._v(t._s(t.$dayjs(e.date).format("YYYY/MM/DD")))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("入金金額")]),s("div",{staticClass:"w-3/5"},[t._v("$"+t._s(e.money))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("設計師")]),s("div",{staticClass:"w-3/5"},[t._v(t._s(e.Maker.name))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("付款方式")]),s("div",{staticClass:"w-3/5"},[t._v(t._s(e.payType))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("入金儲值手續費")]),s("div",{staticClass:"w-3/5"},[t._v(t._s(e.handlingFeeDecountPrice))])])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:2===t.seletedTab,expression:"seletedTab === 2"}],staticClass:"animate__animated animate__fadeIn animate__slow"},t._l(t.resultUseList,(function(e,a){return s("div",{key:"consumption"+a,staticClass:"border-b border-solid border-primary/50 px-2 pb-4"},[s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("帳單編號")]),s("div",{staticClass:"w-3/5"},[t._v(t._s(e.orderNo))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("帳單時間")]),s("div",{staticClass:"w-3/5"},[t._v(t._s(t.$dayjs(e.date).format("YYYY/MM/DD")))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("設計師")]),s("div",{staticClass:"w-3/5"},[t._v(t._s(e.Designer.name))])]),s("div",{staticClass:"mt-2 flex text-left"},[s("div",{staticClass:"w-2/5"},[t._v("使用金額")]),s("div",{staticClass:"w-3/5"},[t._v("$"+t._s(e.money))])])])})),0)])},w=[],C={name:"customer-component-income",mounted(){this.getWalletDepositRecords(),this.getWallet()},deactivated(){window.removeEventListener("scroll",this.scrollGetAddRecords),window.removeEventListener("scroll",this.scrollGetUseRecords)},activated(){this.addRecordsForm.isEnd||1!==this.seletedTab||window.addEventListener("scroll",this.scrollGetAddRecords),this.usedRecordsForm.isEnd||2!==this.seletedTab||window.addEventListener("scroll",this.scrollGetUseRecords)},data(){return{seletedTab:1,addRecordsForm:{pageOffset:0,totalPage:0,isEnd:!1,isGetting:!1},usedRecordsForm:{pageOffset:0,totalPage:0,isEnd:!1,isGetting:!1},resultList:[],resultUseList:[],walletCash:0}},methods:{switchAddEventListener(){1===this.seletedTab?(window.removeEventListener("scroll",this.scrollGetUseRecords),this.addRecordsForm.isEnd||window.addEventListener("scroll",this.scrollGetAddRecords)):(this.usedRecordsForm.isEnd||0===this.resultUseList.length||window.addEventListener("scroll",this.scrollGetUseRecords),this.usedRecordsForm.isEnd||0!==this.resultUseList.length||this.walletUseRecords(),window.removeEventListener("scroll",this.scrollGetAddRecords))},async getWalletDepositRecords(){if(0===this.resultList.length&&this.addRecordsForm.isEnd)return;const t={customerId:this.$route.query.id?this.$route.query.id:"",pageLimit:10,pageOffset:this.addRecordsForm.pageOffset,payType:[]},e=await this.$api.walletDepositRecord(t),{data:s}=e.data;this.addRecordsForm.totalPage=Math.ceil(s.walletDepositRecord.totalCount/10)-1,this.addRecordsForm.isEnd=1===Math.ceil(s.walletDepositRecord.totalCount/10),this.resultList=s.walletDepositRecord.record,this.addRecordsForm.pageOffset<this.addRecordsForm.totalPage&&window.addEventListener("scroll",this.scrollGetAddRecords)},async scrollGetAddRecords(){const t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,s=document.documentElement.scrollHeight||document.body.scrollHeight;if(!this.addRecordsForm.isEnd&&!this.addRecordsForm.isGetting&&t+e>=s-50){this.addRecordsForm.isGetting=!0,this.addRecordsForm.pageOffset+=1,this.addRecordsForm.pageOffset>=this.addRecordsForm.totalPage&&(this.addRecordsForm.isEnd=!0,window.removeEventListener("scroll",this.scrollGetAddRecords));const t={customerId:this.$route.query.id?this.$route.query.id:"",pageLimit:10,pageOffset:this.addRecordsForm.pageOffset,payType:[]},e=await this.$api.walletDepositRecord(t),{data:s}=e.data;this.addRecordsForm.isGetting=!1,this.resultList=this.resultList.concat(s.walletDepositRecord.record)}},async walletUseRecords(){if(0===this.resultUseList.length&&this.usedRecordsForm.isEnd)return;const t={customerId:this.$route.query.id?this.$route.query.id:"",pageLimit:10,pageOffset:this.usedRecordsForm.pageOffset,payType:[]},e=await this.$api.walletUseRecord(t),{data:s}=e.data;this.usedRecordsForm.totalPage=Math.ceil(s.walletUseRecord.totalCount/10)-1,this.usedRecordsForm.isEnd=1===Math.ceil(s.walletUseRecord.totalCount/10),this.resultUseList=s.walletUseRecord.record,this.usedRecordsForm.pageOffset<this.usedRecordsForm.totalPage&&window.addEventListener("scroll",this.scrollGetUseRecords)},async scrollGetUseRecords(){const t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,s=document.documentElement.scrollHeight||document.body.scrollHeight;if(!this.usedRecordsForm.isEnd&&!this.usedRecordsForm.isGetting&&t+e>=s-50){this.usedRecordsForm.isGetting=!0,this.usedRecordsForm.pageOffset+=1,this.usedRecordsForm.pageOffset>=this.usedRecordsForm.totalPage&&(this.usedRecordsForm.isEnd=!0,window.removeEventListener("scroll",this.scrollGetUseRecords));const t={customerId:this.$route.query.id?this.$route.query.id:"",pageLimit:10,pageOffset:this.usedRecordsForm.pageOffset,payType:[]},e=await this.$api.walletUseRecord(t),{data:s}=e.data;this.usedRecordsForm.isGetting=!1,this.resultUseList=this.resultUseList.concat(s.walletUseRecord.record)}},async getWallet(){const t={customerId:this.$route.query.id?this.$route.query.id:""},e=await this.$api.customerWallet(t),{data:s}=e.data;this.walletCash=s.customerWallet}}},x=C,g=(0,n.Z)(x,_,w,!1,null,null,null),y=g.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animate__animated animate__fadeIn animate__fast"},[s("div",{staticClass:"animate__animated animate__fadeIn animate__slow"},[t.resultList.length>0?s("div",{attrs:{id:"position"}},t._l(t.resultList,(function(e,a){return s("Ticket",{key:e.couponId,attrs:{id:e.couponId,title:e.couponName,canUse:e.totalCount,used:e.usedCount,price:e.singleCouponPrice,totalPrice:e.totalCount*e.singleCouponPrice,time:e.boughtDate,"data-aos":"zoom-in","data-aos-delay":100*a,"data-aos-duration":"300","data-aos-once":"true","data-aos-anchor":"#position"},on:{openRecord:function(e){return t.handleOpenRecord(e)}}})})),1):s("div",[s("p",[t._v("尚無使用紀錄")])])]),s("C-Modal-Dialog",{attrs:{animationCss:"animate__animated animate__flipInY animate__fast"},model:{value:t.showRecord,callback:function(e){t.showRecord=e},expression:"showRecord"}},[s("h3",{staticClass:"mt-10 text-center font-bold"},[t._v("染髮卡券")]),t.recordDetail.usedCount&&0!==t.recordDetail.usedCount?s("table",{staticClass:"mt-5 w-full text-left text-sm"},[s("thead",{pre:!0},[s("tr",[s("th",{pre:!0,attrs:{class:"text-center"}},[t._v("項次")]),s("th",[t._v("使用日期")]),s("th",{pre:!0,attrs:{class:"text-center"}},[t._v("使用張數")])])]),s("tbody",t._l(t.recordDetail.usageRecord,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"text-center"},[t._v(t._s(a+1))]),s("td",[t._v(t._s(t.$dayjs(e.usedDate).format("YYYY/MM/DD HH:MM")))]),s("td",{staticClass:"text-center"},[t._v(t._s(e.usageCount))])])})),0)]):t._e(),t.recordDetail.usedCount&&0!==t.recordDetail.usedCount?s("div",{staticClass:"mt-10 grid w-full grid-cols-12 gap-2 text-sm"},[s("div",{pre:!0,attrs:{class:"col-span-9 text-right"}},[t._v("可用次數 :")]),s("div",{staticClass:"col-span-3"},[t._v(t._s(t.recordDetail.totalCount-t.recordDetail.usedCount)+"/"+t._s(t.recordDetail.totalCount))]),s("div",{pre:!0,attrs:{class:"col-span-9 text-right"}},[t._v("總金額 :")]),s("div",{staticClass:"col-span-3"},[t._v("$"+t._s(t.recordDetail.totalCount*t.recordDetail.singleCouponPrice))])]):s("p",{staticClass:"mx-10 mt-10 mb-14 text-center text-stone-500"},[t._v("此卡券尚無使用紀錄")])])],1)},D=[],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("div",{staticClass:"mb-2.5 w-full rounded-lg bg-white shadow-[0px_2px_2px_rgba(0,0,0,0.25)]"},[s("div",{staticClass:"grid grid-cols-12"},[s("div",{staticClass:"relative col-span-4 font-bold text-white",class:{"bg-[#FEB401]":t.canUse>0,"bg-[#aeaeae]":0===t.canUse}},[s("div",{staticClass:"absolute top-0 -left-2.5 z-40 h-[calc(100%+20px)] w-2.5"}),s("div",{staticClass:"5 absolute -bottom-2.5 left-0 z-40 h-2 w-2.5"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[26px] rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[52px] rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[78px] rounded-full bg-white"}),s("div",{staticClass:"absolute -left-2.5 -top-2.5 h-5 w-5 translate-y-[104px] rounded-full bg-white"}),s("div",{staticClass:"flex h-full items-center"},[s("div",{staticClass:"flex w-full items-baseline justify-center py-2 px-4"},[s("p",{staticClass:"text-xs"},[t._v("NT$")]),s("p",{staticClass:"text-2xl"},[t._v(t._s(t.price))])])])]),s("div",{staticClass:"col-span-8 p-2 text-left"},[s("h4",{staticClass:"font-bold"},[t._v(t._s(t.title))]),s("p",{staticClass:"mb-1 text-sm text-[#666]"},[t._v("可用次數："+t._s(t.canUse-t.used)+"/"+t._s(t.canUse)+"(總金額:"+t._s(t.totalPrice)+")")]),s("div",{staticClass:"w-full border-b border-b-[#DDD]"}),s("p",{staticClass:"mb-1 text-xs text-[#666]"},[t._v("購買日期："+t._s(t.$dayjs(t.time).format("YYYY/MM/DD")))]),s("div",{staticClass:"flex items-center justify-end gap-1"},[s("font-awesome-icon",{staticClass:"text-xs text-[#57CDFF]",attrs:{icon:"fa-regular fa-circle-info"},on:{click:function(e){return t.openRecord(t.id)},keypress:function(e){return t.openRecord(t.id)}}}),s("span",{staticClass:"text-xs text-[#57CDFF]",on:{click:function(e){return t.openRecord(t.id)},keypress:function(e){return t.openRecord(t.id)}}},[t._v("使用紀錄")])],1)])])])])},F=[],$={name:"Ticket-index",props:{id:{type:String,default:()=>""},title:{type:String,default:()=>""},price:{type:Number,default:()=>0},totalPrice:{type:Number,default:()=>0},canUse:{type:Number,default:()=>0},used:{type:Number,default:()=>0},time:{type:Number,default:()=>0}},methods:{openRecord(t){this.$emit("openRecord",t)}}},T=$,L=(0,n.Z)(T,E,F,!1,null,null,null),k=L.exports,O={name:"customer-component-coupon",components:{Ticket:k},mounted(){this.getCoupons()},data(){return{resultList:[],showRecord:!1,recordDetail:{}}},methods:{handleOpenRecord(t){this.recordDetail=this.resultList.find((e=>e.couponId===t)),this.showRecord=!0},async getCoupons(){const t=await this.$api.customerCouponBalanceReport(this.$route.query.id),{data:e}=t;this.resultList=e.data.customerCouponBalanceReport[0]?e.data.customerCouponBalanceReport[0].data:[]}}},I=O,U=(0,n.Z)(I,R,D,!1,null,null,null),G=U.exports,P={name:"customer-userInfo",description:"客戶資料查詢的個人資料頁",metaInfo:{title:"名留",titleTemplate:"%s | 客戶資料查詢"},components:{Consumption:f,Coupon:G,Income:y,UserInfo:u},data(){return{seletedTab:"UserInfo",items:[{name:"個人資料",componentId:"UserInfo"},{name:"服務紀錄",componentId:"Consumption"},{name:"入金紀錄",componentId:"Income"},{name:"卡券紀錄",componentId:"Coupon"}]}},methods:{doRoute(t){this.$router.push({name:t})}},computed:{}},j=P,M=(0,n.Z)(j,a,i,!1,null,"80e76362",null),N=M.exports}}]);
//# sourceMappingURL=172.71696265.js.map