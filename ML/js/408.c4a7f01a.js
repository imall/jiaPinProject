"use strict";(self["webpackChunkbos_designer"]=self["webpackChunkbos_designer"]||[]).push([[408],{3408:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"box-border h-full min-h-[calc(100vh-84px)] w-full pb-[84px]"},[s("C-Back-Nav",{attrs:{title:(""!==t.GETTER_MECHANTNAME?t.GETTER_MECHANTNAME+" - ":"")+"打卡",routeTarget:{name:"Punch"}}}),s("section",{staticClass:"relative z-0 mt-[52px] p-3"},[s("div",{staticClass:"mb-4 flex items-center justify-between gap-2"},[s("month-picker-input",{staticClass:"!w-full",attrs:{lang:"zh","input-pre-filled":!0,"default-month":+this.$dayjs().month()+1,"default-year":+t.$dayjs(new Date).format("YYYY")},on:{change:t.showDate}})],1),Array.isArray(t.ListHasResultAttendanceRecords)&&t.ListHasResultAttendanceRecords.length>0?s("div",{staticClass:"text-sm"},[t._m(0),t._l(t.ListHasResultAttendanceRecords,(function(e,a){return s("div",{key:"resultAttendance"+a},[s("div",{staticClass:"mt-4 mb-1 text-left text-second"},[t._v(t._s(t._f("dateFmtMMDDdd")(e.date)))]),t._l(e.clockInRecord,(function(a,i){return s("div",{key:"clockInRecordItem"+i},[a.in?[s("div",{staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[s("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(a.in.time)))]),s("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(a.in.latitude||"--")+t._s(a.in.longitude?","+a.in.longitude:",--"))]),s("div",{staticClass:"w-1/6"},[t._v(t._s(e.isLate?"遲到":"成功"))]),s("div",{staticClass:"w-2/6"},[t._v("上班打卡")]),s("div",{staticClass:"w-1/6 text-center",class:{"text-rejectText":e.lateMinutes>0}},[s("div",[t._v(t._s(0===i?e.lateMinutes:"--"))])])])]:t._e(),a.breakRecord?[t._l(a.breakRecord,(function(e,a){return[e.start?s("div",{key:"breakRecordSatrt"+a,staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[s("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(e.start.time)))]),s("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(e.start.latitude||"--")+t._s(e.start.longitude?","+e.start.longitude:",--"))]),s("div",{staticClass:"w-1/6"},[t._v("成功")]),s("div",{staticClass:"w-2/6"},[t._v("外出打卡")]),t._m(1,!0)]):t._e(),e.end?s("div",{key:"breakRecordEnd"+a,staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[s("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(e.end.time)))]),s("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(e.end.latitude||"--")+t._s(e.end.longitude?","+e.end.longitude:",--"))]),s("div",{staticClass:"w-1/6",class:{"text-rejectText":e.end.isLate}},[t._v(" "+t._s(e.end.isLate?"失敗":"成功"))]),s("div",{staticClass:"w-2/6"},[t._v("歸來打卡")]),t._m(2,!0)]):t._e()]}))]:t._e(),a.out?[s("div",{staticClass:"mb-2 flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[s("div",{staticClass:"w-1/6"},[t._v(t._s(t._f("dateFmtHm")(a.out.time)))]),s("div",{staticClass:"w-2/6 overflow-hidden text-ellipsis text-skyblue"},[t._v(t._s(a.out.latitude||"--")+t._s(a.out.longitude?","+a.out.longitude:",--"))]),s("div",{staticClass:"w-1/6"},[t._v(t._s(e.isLeaveEarly?"早退":"成功"))]),s("div",{staticClass:"w-2/6"},[t._v("下班打卡")]),t._m(3,!0)])]:t._e()],2)}))],2)}))],2):s("div",{staticClass:"mt-3 flex items-center justify-center text-2xl text-second"},[s("p",[t._v("查無資料")])])])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-nowrap gap-1 border-b border-solid border-primary text-left"},[s("div",{staticClass:"w-1/6"},[t._v("時間")]),s("div",{staticClass:"w-2/6"},[t._v("位置")]),s("div",{staticClass:"w-1/6"},[t._v("狀態")]),s("div",{staticClass:"w-2/6"},[t._v("詳情")]),s("div",{staticClass:"w-1/6 text-center"},[t._v("遲到")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-1/6 text-center"},[s("div",[t._v("--")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-1/6 text-center"},[s("div",[t._v("--")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-1/6 text-center"},[s("div",[t._v("--")])])}],r=s(629),n=s(4209),d={name:"punch-list",description:"打卡列表",metaInfo:{title:"名留",titleTemplate:"%s | 打卡"},components:{MonthPickerInput:n.Jf},data(){return{resultAttendance:[],date:{from:null,to:null,month:null,year:2022}}},mounted(){this.init()},methods:{async init(){await Promise.all([this.getAttendanceRecords()]).then((()=>{}))},async getAttendanceRecords(){const t={userId:this.userInfo.user.id,dateRange:{startDate:this.$dayjs(this.date.from).startOf("month").valueOf(),endDate:this.$dayjs(this.date.to).add(-1,"day").endOf("month").valueOf()},pageLimit:1e3},e=await this.$api.attendanceRecords(t),{data:s,errors:a}=e.data;if(a)return;console.log(s.attendanceRecords[0]);const[i={}]=s.attendanceRecords;this.resultAttendance=i.attendanceRecord?i.attendanceRecord:[]},doRoute(){this.$router.push({name:"Punch"})},showDate(t){this.date=t,this.getAttendanceRecords()}},computed:{...(0,r.rn)("userInfo",["userInfo","currentMechantId"]),...(0,r.Se)("userInfo",["GETTER_MECHANTNAME"]),ListHasResultAttendanceRecords(){const t=this.resultAttendance.filter((t=>Array.isArray(t.clockInRecord)&&t.clockInRecord.length>0));return t}}},l=d,c=s(3736),o=(0,c.Z)(l,a,i,!1,null,"16b9188d",null),u=o.exports}}]);
//# sourceMappingURL=408.c4a7f01a.js.map